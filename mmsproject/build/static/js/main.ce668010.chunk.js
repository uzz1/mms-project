/*! For license information please see main.ce668010.chunk.js.LICENSE.txt */
(this.webpackJsonpmmsproject=this.webpackJsonpmmsproject||[]).push([[0],{192:function(e,t,a){e.exports=a(358)},197:function(e,t,a){},203:function(e,t){},205:function(e,t){},219:function(e,t){},221:function(e,t){},249:function(e,t){},251:function(e,t){},252:function(e,t){},257:function(e,t){},259:function(e,t){},265:function(e,t){},267:function(e,t){},286:function(e,t){},298:function(e,t){},301:function(e,t){},318:function(e,t,a){},319:function(e,t,a){},327:function(e,t,a){},328:function(e,t,a){},329:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){},343:function(e,t,a){},344:function(e,t,a){},351:function(e,t,a){},352:function(e,t,a){},353:function(e,t,a){},354:function(e,t,a){},355:function(e,t,a){},356:function(e,t,a){},358:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(10),c=a.n(o),l=a(9),i=a(13),s=(a(197),a(5)),m=a(74),u=a.n(m),p=a(18),d=a.n(p),h=a(6),f=(a(318),a(69)),g=a.n(f),E=(a(319),function(e){var t=e.error;return r.a.createElement("p",{className:"error_field"},t)}),b=Object(n.createContext)(),v=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),i=Object(s.a)(l,2),m=i[0],u=i[1];return r.a.createElement(b.Provider,{value:{currentUser:o,setCurrentUser:c,signUpMsg:m,setSignUpMsg:u}},e.children)},O=a(4),w=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),o=a[0],c=a[1],m=Object(n.useState)(""),p=Object(s.a)(m,2),f=p[0],v=p[1],w=Object(n.useContext)(b),j=w.signUpMsg,_=w.setSignUpMsg,y=Object(n.useState)({username:"",password:"",common:""}),N=Object(s.a)(y,2),k=N[0],S=N[1];return Object(h.checkAuth)()?r.a.createElement(i.a,{to:{pathname:"/"}}):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"login"},j&&r.a.createElement("p",{className:"success_msg"},j),r.a.createElement("img",{src:g.a,alt:"logo",className:"login__logo"}),r.a.createElement(O.e,{onSubmit:function(e){e.preventDefault();var t=new Headers({Authorization:"Basic ".concat(u.a.encode("".concat(u.a.encode(o),":").concat(u.a.encode(f))))});fetch("/api/login",{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(e){if(200===e.status){if(c(""),v(""),e.token){var t=e.token;d.a.set("token",t,{expires:2})}_(""),window.location.replace("/")}else switch(e.field){case"common":S({username:"",password:"",common:e.msg});break;case"password":S({username:"",common:"",password:e.msg});break;case"username":S({password:"",common:"",username:e.msg});break;default:S({username:"",password:"",common:"Oops, something went wrong!"})}})).catch((function(e){S({username:"",password:"",common:"Oops, something went wrong!"})}))},className:"login__form"},r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"siteName"},"Username"),r.a.createElement(O.g,{type:"text",name:"username",id:"username",placeholder:"Your username",onChange:function(e){return c(e.target.value)},required:!0,value:o}),k.username&&r.a.createElement(E,{error:k.username})),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"siteName"},"Password"),r.a.createElement(O.g,{type:"password",name:"password",id:"password",placeholder:"Your password",onChange:function(e){return v(e.target.value)},required:!0,value:f}),k.password&&r.a.createElement(E,{error:k.password}),k.common&&r.a.createElement(E,{error:k.common})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Log in")),r.a.createElement("div",{className:"msg"},"Don't have an account? ",r.a.createElement(l.b,{to:"/signup"},"Sign up"))))},j=(a(327),a(381)),_=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),o=a[0],c=a[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),p=u[0],d=u[1],f=Object(n.useState)(""),g=Object(s.a)(f,2),v=g[0],w=g[1],_=Object(n.useContext)(b).setSignUpMsg,y=Object(n.useState)({username:"",email:"",password:"",common:""}),N=Object(s.a)(y,2),k=N[0],S=N[1];return Object(h.checkAuth)()?r.a.createElement(i.a,{to:{pathname:"/"}}):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"signup"},r.a.createElement("h1",null,"Register"),r.a.createElement(j.a,{className:"icon"}),r.a.createElement(O.e,{onSubmit:function(t){t.preventDefault();var a=new FormData;a.append("username",o),a.append("email",p),a.append("password",v),fetch("/api/signup",{method:"POST",body:a}).then((function(e){return e.json()})).then((function(t){if(200===t.status)c(""),d(""),w(""),_(t.msg),e.history.push("/login");else switch(t.field){case"username":S({username:t.msg,email:"",password:"",common:""});break;case"email":S({username:"",email:t.msg,password:"",common:""});break;case"password":S({username:"",email:"",password:t.msg,common:""});break;case"common":S({username:"",email:"",password:"",common:t.msg});break;default:S({username:"",email:"",password:"",common:"Oops, something went wrong!"})}})).catch((function(e){S({username:"",email:"",password:"",common:"Oops, something went wrong!"})}))},className:"signup__form"},r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"username"},"Username"),r.a.createElement(O.g,{type:"text",name:"username",value:o,id:"username",placeholder:"Choose a username",onChange:function(e){return c(e.target.value)},required:!0,minLength:"2",maxLength:"50"}),k.username&&r.a.createElement(E,{error:k.username})),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"email"},"Email"),r.a.createElement(O.g,{type:"email",name:"email",value:p,id:"email",placeholder:"yourmail@mail.com",onChange:function(e){return d(e.target.value)},required:!0,maxLength:"150"}),k.email&&r.a.createElement(E,{error:k.email})),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"password"},"Password"),r.a.createElement(O.g,{type:"password",name:"password",value:v,id:"password",placeholder:"Choose a password",onChange:function(e){return w(e.target.value)},required:!0,minLength:"8"}),k.password&&r.a.createElement(E,{error:k.password}),k.common&&r.a.createElement(E,{error:k.common})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Sign up")),r.a.createElement("div",{className:"msg"},"Already have an account? ",r.a.createElement(l.b,{to:"/login"},"Log in"))))},y=(a(328),a(329),a(180)),N=a.n(y),k=a(181),S=a.n(k),x=a(182),A=a.n(x),C=a(183),L=a.n(C),T=a(46),P=a.n(T),G=function(){var e=Object(n.useState)(!0),t=Object(s.a)(e,2),a=t[0],o=t[1],c=function(){return o(!a)};return r.a.createElement("header",{onClick:c,className:"header"},r.a.createElement(O.k,{color:"white",light:!0,className:"navbar-main"},r.a.createElement(O.l,{href:"/",className:"me-auto"},r.a.createElement(O.d,{className:"navbrand"},r.a.createElement(l.b,{to:"/",exact:!0},r.a.createElement("img",{src:g.a,alt:"logo",className:"login__logo"}),"Assessment"))),r.a.createElement(O.c,{isOpen:!a,navbar:!0,className:"collapse-menu"},r.a.createElement(O.i,{navbar:!0},r.a.createElement(O.j,null,r.a.createElement(l.c,{to:"/",exact:!0},r.a.createElement(N.a,null),"Dashboard")),r.a.createElement(O.j,null,r.a.createElement(l.c,{to:"/locations",exact:!0},r.a.createElement(P.a,null),"Locations")),r.a.createElement(O.j,null,r.a.createElement(l.c,{to:"/search"},r.a.createElement(S.a,null),"Search")),r.a.createElement(O.j,null,r.a.createElement(l.c,{to:"/newpost"},r.a.createElement(A.a,null),"New Location")),r.a.createElement(O.j,null,r.a.createElement(l.c,{to:"/profile"},r.a.createElement(L.a,null),"Profile")))),r.a.createElement(O.m,{onClick:c,className:"me-2"})))},F=(a(331),Object(n.createContext)()),D=function(e){var t=e.children,a=Object(n.useState)([]),o=Object(s.a)(a,2),c=o[0],l=o[1];return Object(n.useEffect)((function(){fetch("/api/posts",{headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?l(e.posts):l("")})).catch((function(e){l("")}))}),[]),r.a.createElement(F.Provider,{value:{posts:c,setPosts:l}},t)},I=(a(332),a(185)),U=a.n(I),B=a(184),z=a.n(B),q=a(31),M=a.n(q),R=function(e){var t,a=e.id,o=e.public_id,c=e.author,i=e.img,m=e.post,u=(e.date_posted,e.latitude,e.longitude,Object(n.useContext)(F)),p=(u.posts,u.setPosts,Object(n.useState)("")),f=Object(s.a)(p,2),g=f[0],b=f[1],v=Object(n.useState)(!1),w=Object(s.a)(v,2),j=w[0],_=w[1],y=function(){_(!j)};return Object(h.checkAuth)()?r.a.createElement(O.b,{lg:"4",md:"4",sm:"6",xs:"12"},j&&r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"content"},r.a.createElement("span",{onClick:y,className:"close"},"\xd7"))),r.a.createElement("div",{className:"post__top"},r.a.createElement("strong",null,m)),r.a.createElement("div",{className:"post__img"},r.a.createElement("img",{onDoubleClick:null,src:i,alt:"post-img"})),g&&r.a.createElement(E,{error:g}),r.a.createElement("div",{className:"post__fun"},r.a.createElement(l.b,{to:"/images/".concat(a),className:"comment_link"},r.a.createElement(O.a,null,r.a.createElement(z.a,{className:"icon"}),"Images"))),r.a.createElement("div",{className:"post__fun"},r.a.createElement(l.b,{to:"/comments/".concat(a),className:"comment_link"},r.a.createElement(O.a,null," ",r.a.createElement(U.a,{className:"icon"}),"Notes"))),r.a.createElement("div",{className:"post__post"},r.a.createElement("strong",null,"Author: "),c),(t=o,(Object(h.checkAuth)()?M.a.decode(d.a.get("token")).public_id===t:window.location.replace("/login"))?r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{onClick:function(){return function(e,t){if(!Object(h.checkAuth)())return window.location.replace("/login");fetch("/api/delete_post",{method:"DELETE",headers:{public_id:e,post_id:t,"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(y(),b(""),window.location.reload("/")):(y(),b("Oops, Some, error, happened!"))})).catch((function(e){y(),b("Oops, Some, error, happened!")}))}(o,a)}},"Delete")):null)):window.location.replace("/login")},W=a(104),Y=(Object(W.WidthProvider)(W.Responsive),function(e){var t=Object(n.useContext)(F).posts,a=t.length>0?t.map((function(e){return r.a.createElement(R,{key:e.id,public_id:e.public_id,id:e.id,author:e.author,img:e.img,post:e.post,latitude:e.latitude,longitude:e.longitude})})):r.a.createElement("p",{className:"home__msg"},"Oops! No locations sites yet...");return Object(h.checkAuth)()?r.a.createElement(O.d,{className:"container"},r.a.createElement(O.n,null,a)):window.location.replace("/login")}),H=(a(343),function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),i=Object(s.a)(c,2),m=i[0],u=i[1],p=Object(n.useState)(""),d=Object(s.a)(p,2),f=d[0],g=d[1],E=a&&a.map((function(e){return r.a.createElement("div",{key:e.id,className:"user"},r.a.createElement(l.b,{to:"images/".concat(e.id)},r.a.createElement("div",null,r.a.createElement("img",{className:"user__profile_pic",src:e.img,alt:"location image"}),r.a.createElement("span",{className:"user__username"},e.post))),r.a.createElement("div",null))}));return r.a.createElement("div",{className:"search"},r.a.createElement("h1",null,"Search"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},r.a.createElement("input",{type:"text",placeholder:"Search Locations...",value:m,onChange:function(e){u(e.target.value),""!==e.target.value&&function(e){if(!Object(h.checkAuth)())return window.location.replace("/login");var t=new FormData;t.append("term",e),fetch("/api/search",{method:"POST",body:t,headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(g(""),o(e.posts)):404===e.status?(o(""),g("Oops, No locations found...")):(o(""),g("Oops, Some error happened! Try Again..."))})).catch((function(e){o(""),g("Oops, Some error happened! Try Again...")}))}(e.target.value)}})),r.a.createElement("p",{className:"search__message"},f&&f),r.a.createElement("div",{className:"search__results"},E))}),J=a(48),K=(a(344),a(55)),X=a.n(K),Z=a(47),V=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),i=Object(s.a)(l,2),m=i[0],u=i[1],p=Object(n.useState)(""),d=Object(s.a)(p,2),f=d[0],g=d[1],E=Object(Z.useGeolocated)({positionOptions:{enableHighAccuracy:!0},userDecisionTimeout:5e3}),b=E.coords,v=E.isGeolocationAvailable,w=E.isGeolocationEnabled,j=Object(n.useContext)(F),_=j.posts,y=j.setPosts,N=r.a.useRef(null),k=r.a.useCallback((function(){var e=N.current.getScreenshot();c(e)}),[N]);return r.a.createElement("div",{className:"newpost"},r.a.createElement("div",null,""!=o?r.a.createElement("img",{src:o,className:"img"}):r.a.createElement(X.a,{audio:!1,height:400,ref:N,screenshotFormat:"image/jpeg",width:400,videoConstraints:{width:300,height:300,facingMode:"environment"}})),""===o?r.a.createElement(O.a,{onClick:k},"Capture photo"):r.a.createElement(O.a,{onClick:function(){c("")}},"Retake"),r.a.createElement("br",null),r.a.createElement("br",null),f&&r.a.createElement("p",{className:"newpost__error"},"Oops, Some Error happened! Try Again..."),r.a.createElement(O.e,{onSubmit:function(t){if(t.preventDefault(),!Object(h.checkAuth)())return window.location.replace("/login");if(""===o)return window.alert("Image Not Set");var a=new FormData;a.append("img",o),a.append("text",m),a.append("img",function(e){for(var t=atob(e.split(",")[1]),a=new ArrayBuffer(t.length),n=new Uint8Array(a),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return new Blob([a],{type:"image/jpeg"})}(o)),a.append("lat",b.latitude),a.append("long",b.longitude),fetch("/api/newpost",{method:"POST",body:a,headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(t){200===t.status?(y([t.post].concat(Object(J.a)(_))),u(""),window.alert("Successfully added new location site"),e.history.push("/locations")):g("Oops, Some error happened! Try Again...")})).catch((function(e){g("Oops, Some error happened! Try Again...")}))}},r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"siteName"},"Location Site Name"),r.a.createElement(O.g,{type:"text",name:"name",id:"siteName",placeholder:"Enter Site Name",onChange:function(e){return u(e.target.value)},required:!0})),r.a.createElement(O.f,null,""!=o?r.a.createElement(O.h,{for:"img"},"Image Set"):r.a.createElement(O.h,{for:"img"},"Image not set... Capture a photo")),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"img"},"Location:"),v?w?b?r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"latitude"),r.a.createElement("td",null,b.latitude)),r.a.createElement("tr",null,r.a.createElement("td",null,"longitude"),r.a.createElement("td",null,b.longitude)))):r.a.createElement("div",null,"Getting the location data\u2026 "):r.a.createElement("div",null,"Geolocation is not enabled"):r.a.createElement("div",null,"Your browser does not support Geolocation")),r.a.createElement(O.a,null,"Add Location Site")))},Q=(a(351),function(e){var t=e.match.params.id,a=Object(n.useState)(""),o=Object(s.a)(a,2),c=o[0],i=o[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),p=(u[0],u[1]),d=Object(n.useState)(""),f=Object(s.a)(d,2),g=f[0],E=f[1],b=Object(n.useState)(""),v=Object(s.a)(b,2),w=v[0],j=v[1],_=Object(Z.useGeolocated)({positionOptions:{enableHighAccuracy:!0},userDecisionTimeout:5e3}),y=_.coords,N=_.isGeolocationAvailable,k=_.isGeolocationEnabled,S=Object(n.useContext)(F),x=(S.posts,S.setPosts,r.a.useRef(null)),A=r.a.useCallback((function(){var e=x.current.getScreenshot();i(e)}),[x]);return r.a.createElement("div",{className:"newpost"},r.a.createElement(l.b,{to:"/locations"},r.a.createElement(O.a,null,"Back")),r.a.createElement("br",null),r.a.createElement("div",null,""!=c?r.a.createElement("img",{src:c,className:"img"}):r.a.createElement(X.a,{audio:!1,height:400,ref:x,screenshotFormat:"image/jpeg",width:400,videoConstraints:{width:300,height:300,facingMode:"environment"}})),""===c?r.a.createElement(O.a,{onClick:A},"Capture photo"):r.a.createElement(O.a,{onClick:function(){i("")}},"Retake"),r.a.createElement("br",null),r.a.createElement("br",null),g&&r.a.createElement("p",{className:"newpost__error"},"Oops, Some Error happened! Try Again..."),r.a.createElement(O.e,{onSubmit:function(a){if(a.preventDefault(),!Object(h.checkAuth)())return window.location.replace("/login");if(""===c)return window.alert("Image Not Set");var n=new FormData;n.append("name",w),n.append("id",t),n.append("img",function(e){for(var t=atob(e.split(",")[1]),a=new ArrayBuffer(t.length),n=new Uint8Array(a),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return new Blob([a],{type:"image/jpeg"})}(c)),n.append("lat",y.latitude),n.append("long",y.longitude),fetch("/api/add_image",{method:"POST",body:n,headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(a){200===a.status?(j(""),p(""),window.alert("Successfully added new image"),e.history.push("/images/".concat(t))):E("Oops, Some error happened! Try Again...")})).catch((function(e){E("Oops, Some error happened! Try Again...")}))}},r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"siteName"},"Image Name"),r.a.createElement(O.g,{type:"text",name:"name",id:"imageName",placeholder:"Enter Image Name",onChange:function(e){return j(e.target.value)},required:!0})),r.a.createElement(O.f,null,""!=c?r.a.createElement(O.h,{for:"img"},"Image Set"):r.a.createElement(O.h,{for:"img"},"Image not set... Capture a photo")),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"location"},"Location:"),N?k?y?r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"latitude"),r.a.createElement("td",null,y.latitude)),r.a.createElement("tr",null,r.a.createElement("td",null,"longitude"),r.a.createElement("td",null,y.longitude)))):r.a.createElement("div",null,"Getting the location data\u2026 "):r.a.createElement("div",null,"Geolocation is not enabled"):r.a.createElement("div",null,"Your browser does not support Geolocation")),r.a.createElement(O.a,null,"Add Image Object")))}),$=a(186);a(352);function ee(){ee=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",c=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function i(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(x){i=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var o=t&&t.prototype instanceof p?t:p,c=Object.create(o.prototype),l=new N(r||[]);return n(c,"_invoke",{value:w(e,a,l)}),c}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(x){return{type:"throw",arg:x}}}e.wrap=s;var u={};function p(){}function d(){}function h(){}var f={};i(f,o,(function(){return this}));var g=Object.getPrototypeOf,E=g&&g(g(k([])));E&&E!==t&&a.call(E,o)&&(f=E);var b=h.prototype=p.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){var r;n(this,"_invoke",{value:function(n,o){function c(){return new t((function(r,c){!function n(r,o,c,l){var i=m(e[r],e,o);if("throw"!==i.type){var s=i.arg,u=s.value;return u&&"object"==typeof u&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,c,l)}),(function(e){n("throw",e,c,l)})):t.resolve(u).then((function(e){s.value=e,c(s)}),(function(e){return n("throw",e,c,l)}))}l(i.arg)}(n,o,r,c)}))}return r=r?r.then(c,c):c()}})}function w(e,t,a){var n="suspendedStart";return function(r,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw o;return S()}for(a.method=r,a.arg=o;;){var c=a.delegate;if(c){var l=j(c,a);if(l){if(l===u)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=m(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===u)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}function j(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),u;var r=m(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function y(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:d,configurable:!0}),d.displayName=i(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,i(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(O.prototype),i(O.prototype,c,(function(){return this})),e.AsyncIterator=O,e.async=function(t,a,n,r,o){void 0===o&&(o=Promise);var c=new O(s(t,a,n,r),o);return e.isGeneratorFunction(a)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},v(b),i(b,l,"Generator"),i(b,o,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(y),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return c.type="throw",c.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=a.call(o,"catchLoc"),i=a.call(o,"finallyLoc");if(l&&i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),y(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;y(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:k(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}var te=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(s.a)(c,2),i=l[0],m=l[1],u=function(){var e=Object($.a)(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(h.checkAuth)()){e.next=2;break}return e.abrupt("return",window.location.replace("/login"));case 2:return e.next=4,d.a.remove("token");case 4:return e.abrupt("return",window.location.replace("/login"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(Object(n.useEffect)((function(){fetch("/api/get_current_user",{method:"GET",headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(m(""),o(e.user)):m("Oops, Some error happened!")})).catch((function(e){m("Oops, Some error happened!")}))}),[]),!Object(h.checkAuth)())return window.location.replace("/login");var p=a?r.a.createElement("div",null,r.a.createElement("div",{className:"profile__top"},"User Profile"),r.a.createElement("div",{className:"profile__header"},r.a.createElement("div",{className:"profile__header__details"},r.a.createElement("p",null,"Username:"),r.a.createElement("p",{className:"profile__header__username"},a.username),r.a.createElement("p",null,"Email:"),r.a.createElement("p",{className:"profile__header__username"},a.email)),r.a.createElement("div",{className:"profile__header__logout"},r.a.createElement("button",{onClick:u,className:"btn btn-primary",href:"/logout"},"Logout"))),r.a.createElement("div",{className:"profile__body_top"},r.a.createElement("div",null)),r.a.createElement("div",{className:"profile__body_middle"},r.a.createElement("span",{className:"profile__verbose"},"Posts: "),r.a.createElement("span",{className:"profile__number"},r.a.createElement("strong",null,a.posts))),r.a.createElement("a",{className:"profile__body_edit-btn btn btn-primary",href:"/edit_profile"},"Edit Profile")):r.a.createElement("p",{className:"msg"},i);return r.a.createElement("div",{className:"profile"},p)},ae=(a(353),function(e){var t=Object(n.useState)(),a=Object(s.a)(t,2),o=(a[0],a[1],Object(n.useState)("")),c=Object(s.a)(o,2),l=c[0],i=c[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),p=u[0],d=u[1],f=Object(n.useState)(""),g=Object(s.a)(f,2),b=(g[0],g[1]),v=Object(n.useState)({username:"",email:"",common:""}),O=Object(s.a)(v,2),w=O[0],j=O[1];Object(n.useEffect)((function(){if(!Object(h.checkAuth)())return window.location.replace("/login");fetch("/api/get_current_user",{method:"GET",headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(i(e.user.username),d(e.user.email),b(e.user.bio?e.user.bio:"")):j({username:"",email:"",password:"",common:"Oops, something went wrong!"})})).catch((function(e){j({username:"",email:"",password:"",common:"Oops, something went wrong!"})}))}),[]);return Object(h.checkAuth)()?r.a.createElement("div",{className:"edit_profile"},r.a.createElement("p",{className:"edit_profile__top"},"Edit Profile"),r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),!Object(h.checkAuth)())return window.location.replace("/login");var t=new FormData;t.append("username",l),t.append("email",p),fetch("/api/update_profile",{method:"PUT",body:t,headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){if(200===e.status)document.getElementById("file").value=null,window.location.replace("/profile");else switch(e.field){case"username":j({username:e.msg,email:"",common:""});break;case"email":j({username:"",email:e.msg,common:""});break;case"common":j({username:"",email:"",common:e.msg});break;default:j({username:"",email:"",common:"Oops, something went wrong!"})}})).catch((function(e){j({username:"",email:"",common:"Oops, something went wrong!"})}))},encType:"multipart/form-data"},w.common&&r.a.createElement(E,{error:w.common}),r.a.createElement("input",{type:"text",placeholder:"Username",value:l,onChange:function(e){return i(e.target.value)},required:!0}),w.username&&r.a.createElement(E,{error:w.username}),r.a.createElement("input",{type:"email",placeholder:"Email",value:p,onChange:function(e){return d(e.target.value)},required:!0}),w.email&&r.a.createElement(E,{error:w.email}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Update"))):window.location.replace("/login")}),ne=(a(354),Object(n.createContext)()),re=function(e){var t=e.children,a=Object(n.useState)([]),o=Object(s.a)(a,2),c=o[0],l=o[1];return r.a.createElement(ne.Provider,{value:{comments:c,setComments:l}},t)},oe=function(e){var t,a=e.match.params.id,o=Object(n.useState)("Loading..."),c=Object(s.a)(o,2),l=c[0],i=c[1],m=Object(n.useContext)(ne),u=m.comments,p=m.setComments,f=Object(n.useContext)(F).posts,g=Object(n.useState)(""),E=Object(s.a)(g,2),b=E[0],v=E[1],O=M.a.decode(d.a.get("token")).public_id,w=Object(n.useState)(""),j=Object(s.a)(w,2),_=(j[0],j[1]),y=Object(n.useState)(!1),N=Object(s.a)(y,2),k=N[0],S=N[1],x=function(){S(!k)};t=f.find((function(e){return String(e.id)===String(a)}));Object(n.useEffect)((function(){!function(){if(!Object(h.checkAuth)())return window.location.replace("/login");t?fetch("/api/comments",{method:"GET",headers:{"x-access-token":Object(h.getToken)(),id:a}}).then((function(e){return e.json()})).then((function(e){200===e.status?(i(""),p(e.comments)):i("Oops, Something went wrong!!!")})).catch((function(e){i("No Posts Found!")})):i("No Posts Found!")}()}),[t]);var A=t&&r.a.createElement("div",{className:"comments__body"},r.a.createElement("div",{className:"real_post"},r.a.createElement("div",{className:"real_post_left"}),r.a.createElement("div",{className:"real_post_right"},r.a.createElement("span",null,"Site: "),r.a.createElement("br",null),r.a.createElement("strong",null," ",t.post))),u.length>0?r.a.createElement("div",{className:"comments"},u.map((function(e){return r.a.createElement("div",{key:e.id,className:"comment"},r.a.createElement("div",{className:"comments__left"},r.a.createElement("img",{className:"avatar",src:e.profile_pic,alt:"profile"})),r.a.createElement("div",{className:"comments__right"},r.a.createElement("div",{className:"comments__right_top"},r.a.createElement("strong",null,e.commentator),r.a.createElement("span",null,e.comment),r.a.createElement("button",{onClick:function(){return function(e,t,a){if(!Object(h.checkAuth)())return window.location.replace("/login");fetch("/api/delete_comment",{method:"DELETE",headers:{public_id:e,post_id:t,comment_id:a,"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(x(),_(""),window.location.reload("/")):(x(),_("Oops, Some, error, happened!"))})).catch((function(e){x(),_("Oops, Some, error, happened!")}))}(O,a,e.id)}},"delete")),r.a.createElement("div",{className:"comments__extras"},r.a.createElement("span",null,e.date_posted))))}))):r.a.createElement("p",{className:"msg"},"No Comments Found!!!"),r.a.createElement("form",{className:"add_comment",onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("comment",b),t.append("id",a),fetch("/api/add_comment",{method:"POST",body:t,headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(i(""),p([].concat(Object(J.a)(u),[e.comment])),v("")):i("Oops some error happened")})).catch((function(e){i("Oops some error happened")}))}},r.a.createElement("input",{type:"text",required:!0,placeholder:"Add a note...",className:"comment_box",value:b,onChange:function(e){v(e.target.value)}}),r.a.createElement("button",{type:"submit",className:"btn btn-primary post-btn"},"Add")));return Object(h.checkAuth)()?r.a.createElement("div",{className:"comments"},r.a.createElement("div",{className:"comments__header"},r.a.createElement("strong",null,"Notes")),l&&r.a.createElement("p",{className:"msg"},l),A):window.location.replace("/login")},ce=(a(355),Object(n.createContext)()),le=function(e){var t=e.children,a=Object(n.useState)([]),o=Object(s.a)(a,2),c=o[0],l=o[1];return r.a.createElement(ce.Provider,{value:{images:c,setImages:l}},t)},ie=a(73),se=function(e){var t,a=e.match.params.id,o=Object(n.useState)("Loading..."),c=Object(s.a)(o,2),i=c[0],m=c[1],u=Object(n.useContext)(ce),p=u.images,f=u.setImages,g=Object(n.useContext)(F).posts,E=Object(n.useState)(""),b=Object(s.a)(E,2),v=b[0],w=b[1],j=M.a.decode(d.a.get("token")).public_id,_=Object(n.useState)(""),y=Object(s.a)(_,2),N=(y[0],y[1]),k=Object(n.useState)(!1),S=Object(s.a)(k,2),x=S[0],A=S[1],C=Object(n.useState)(""),L=Object(s.a)(C,2),T=L[0],G=(L[1],Object(Z.useGeolocated)({positionOptions:{enableHighAccuracy:!0},userDecisionTimeout:5e3})),D=G.coords,I=(G.isGeolocationAvailable,G.isGeolocationEnabled,function(){A(!x)});t=g.find((function(e){return String(e.id)===String(a)}));var U=function(e){return r.a.createElement("p",{style:{color:"blue"}},r.a.createElement(P.a,{style:{color:"red"}}),e.name)},B={center:{lat:-33.9249,lng:18.4241},zoom:9};Object(n.useEffect)((function(){!function(){if(!Object(h.checkAuth)())return window.location.replace("/login");t?fetch("/api/images",{method:"GET",headers:{"x-access-token":Object(h.getToken)(),id:a}}).then((function(e){return e.json()})).then((function(e){200===e.status?(m(""),f(e.images)):m("Oops, Something went wrong!!!")})).catch((function(e){m("No Sites Found!")})):m("No Posts Found!")}()}),[t]);var z=t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"images__body"},r.a.createElement("div",{className:"real_post"},r.a.createElement("br",null),r.a.createElement("h2",null," ",t.post),r.a.createElement("br",null),r.a.createElement("img",{className:"post_image",src:t.img}),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Timestamp: "),t.date_posted)),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Latitude: "),t.latitude)),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Longitude: "),t.longitude)),r.a.createElement("div",{className:"images__extras"},r.a.createElement("span",null,"Author: ",t.author))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",null,"Mapped Image Geolocations"),r.a.createElement("div",{style:{height:"60vh",width:"70vw"}},r.a.createElement(ie.a,{bootstrapURLKeys:{key:"AIzaSyB5o-gFEfMaWlniBtBOWkozXBz6mCsUrWg"},defaultCenter:B.center,defaultZoom:B.zoom},p.length>0?p.map((function(e,t){return r.a.createElement(U,{key:t.toString(),name:e.name,lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)})})):null)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"Images"),r.a.createElement("br",null),p.length>0?r.a.createElement("div",{className:"images"},p.map((function(e){return r.a.createElement("div",{key:e.id,className:"image"},r.a.createElement("div",{className:"images__left"},r.a.createElement("img",{className:"image_img",src:e.img,alt:"img"})),r.a.createElement("div",{className:"images__right"},r.a.createElement("h5",null,r.a.createElement("strong",null,e.name)),r.a.createElement("h5",null,e.date_posted.slice(0,9)),r.a.createElement("h5",null,e.date_posted.slice(10)),r.a.createElement("div",{className:"images__right_top"},r.a.createElement("strong",null,"Latitude"),r.a.createElement("span",null,e.latitude)),r.a.createElement("div",{className:"images__right_top"},r.a.createElement("strong",null,"Longitude"),r.a.createElement("span",null,e.longitude)),r.a.createElement("div",{className:"images__right_top"},r.a.createElement(O.a,{onClick:function(){return function(e,t,a){if(!Object(h.checkAuth)())return window.location.replace("/login");fetch("/api/delete_image",{method:"DELETE",headers:{public_id:e,post_id:t,image_id:a,"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(I(),N(""),window.location.reload(!0)):(I(),N("Oops, Some, error, happened!"))})).catch((function(e){I(),N("Oops, Some, error, happened!")}))}(j,a,e.id)}},"delete")),r.a.createElement("div",{className:"images__extras"},r.a.createElement("span",null,"Author: ",e.author))))}))):r.a.createElement("p",{className:"msg"},"No Images Found!!!")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("name",v),t.append("id",a),t.append("img",function(e){for(var t=atob(e.split(",")[1]),a=new ArrayBuffer(t.length),n=new Uint8Array(a),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return new Blob([a],{type:"image/jpeg"})}(T)),t.append("lat",D.latitude),t.append("long",D.longitude),fetch("/api/add_image",{method:"POST",body:t,headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(m(""),f([].concat(Object(J.a)(p),[e.image])),w(""),window.location.reload(!0)):m("Oops some error happened")})).catch((function(e){m("Oops some error happened")}))}},r.a.createElement("div",{className:"add_image"},r.a.createElement("div",{className:"input_div"},r.a.createElement(l.b,{to:"/newimage/".concat(a)},r.a.createElement(O.a,{className:"btn btn-primary post-btn"},"Add New Image"))))));return Object(h.checkAuth)()?r.a.createElement("div",{className:"images"},r.a.createElement(l.b,{to:"/locations"},r.a.createElement(O.a,null,"Back")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"images__header"},r.a.createElement("h1",null,"Location Site Images")),i&&r.a.createElement("p",{className:"msg"},i),z):window.location.replace("/login")};a(356);var me=function(e){var t=Object(n.useContext)(F).posts,a=Object(n.useState)(""),o=Object(s.a)(a,2),c=o[0],i=o[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),p=(u[0],u[1]);if(Object(n.useEffect)((function(){fetch("/api/get_current_user",{method:"GET",headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(p(""),i(e.user)):p("Oops, Some error happened!")})).catch((function(e){p("Oops, Some error happened!")}))}),[]),!Object(h.checkAuth)())return window.location.replace("/login");var d=function(e){return r.a.createElement("p",{style:{color:"blue"}},r.a.createElement(P.a,{style:{color:"red"}}),e.title)},f={center:{lat:-33.9249,lng:18.4241},zoom:9};return Object(h.checkAuth)()?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"dashboard"},r.a.createElement("h1",null,"Dashboard"),r.a.createElement("div",{className:"welcome"},r.a.createElement("h5",null,"Welcome: ",c.username)),r.a.createElement("h3",null,"Locations Sites: ",t.length),r.a.createElement("div",{style:{height:"60vh",width:"70vw"}},t?r.a.createElement(ie.a,{bootstrapURLKeys:{key:"AIzaSyB5o-gFEfMaWlniBtBOWkozXBz6mCsUrWg"},defaultCenter:f.center,defaultZoom:f.zoom},t.length>0?t.map((function(e,t){return r.a.createElement(d,{key:t.toString(),title:e.post,lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)})})):null):null),r.a.createElement("div",null,r.a.createElement(l.b,{to:"/locations"},r.a.createElement(O.a,null,"View Locations"))))):window.location.replace("/login")},ue=function(){return r.a.createElement(l.a,null,r.a.createElement(G,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/search",component:H}),r.a.createElement(i.b,{path:"/newpost",component:V}),r.a.createElement(i.b,{path:"/profile",component:te}),r.a.createElement(i.b,{path:"/edit_profile",component:ae}),r.a.createElement(i.b,{path:"/comments/:id",component:oe}),r.a.createElement(i.b,{path:"/images/:id",component:se}),r.a.createElement(i.b,{path:"/newimage/:id",component:Q}),r.a.createElement(i.b,{path:"/dashboard",component:me}),r.a.createElement(i.b,{path:"/locations",exact:!0,component:Y}),r.a.createElement(i.b,{path:"/",exact:!0,component:me})))},pe=a(188),de=["component"],he=a(6).checkAuth,fe=function(e){var t=e.component,a=Object(pe.a)(e,de);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return he()?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/login"}})}}))},ge=function(){return r.a.createElement(l.a,null,r.a.createElement(D,null,r.a.createElement(v,null,r.a.createElement(re,null,r.a.createElement(le,null,r.a.createElement("div",{className:"container"},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",component:w}),r.a.createElement(i.b,{path:"/signup",component:_}),r.a.createElement(fe,{path:"/search",exact:!0,component:ue}),r.a.createElement(fe,{path:"/newpost",exact:!0,component:ue}),r.a.createElement(fe,{path:"/profile",exact:!0,component:ue}),r.a.createElement(fe,{path:"/comments/:id",exact:!0,component:ue}),r.a.createElement(fe,{path:"/images/:id",exact:!0,component:ue}),r.a.createElement(fe,{path:"/newimage/:id",exact:!0,component:ue}),r.a.createElement(fe,{path:"/edit_profile",exact:!0,component:ue}),r.a.createElement(fe,{path:"/",exact:!0,component:ue}),r.a.createElement(fe,{path:"/dashboard",exact:!0,component:ue}),r.a.createElement(fe,{path:"/locations",exact:!0,component:ue}))))))))};a(357);c.a.render(r.a.createElement(ge,null),document.getElementById("root"))},6:function(e,t,a){"use strict";a.r(t),a.d(t,"checkAuth",(function(){return l})),a.d(t,"getToken",(function(){return i}));var n=a(18),r=a.n(n),o=a(31),c=a.n(o),l=function(){try{var e=r.a.get("token");return!!e&&!(c.a.decode(e).exp<(new Date).getTime()/1e3)}catch(t){return!1}},i=function(){if(l())return r.a.get("token")}},69:function(e,t,a){e.exports=a.p+"static/media/logo.4767f928.jpg"}},[[192,1,2]]]);
//# sourceMappingURL=main.ce668010.chunk.js.map