/*! For license information please see main.68f41ec1.chunk.js.LICENSE.txt */
(this.webpackJsonpmmsproject=this.webpackJsonpmmsproject||[]).push([[0],{178:function(e,t,a){e.exports=a(334)},183:function(e,t,a){},189:function(e,t){},191:function(e,t){},205:function(e,t){},207:function(e,t){},235:function(e,t){},237:function(e,t){},238:function(e,t){},243:function(e,t){},245:function(e,t){},251:function(e,t){},253:function(e,t){},272:function(e,t){},284:function(e,t){},287:function(e,t){},304:function(e,t,a){},305:function(e,t,a){},313:function(e,t,a){},314:function(e,t,a){},315:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},327:function(e,t,a){},328:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){},334:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),l=a(9),i=a(13),s=(a(183),a(5)),m=a(72),u=a.n(m),d=a(18),p=a.n(d),h=a(6),f=(a(304),a(66)),g=a.n(f),E=(a(305),function(e){var t=e.error;return r.a.createElement("p",{className:"error_field"},t)}),b=Object(n.createContext)(),v=function(e){var t=Object(n.useState)(null),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),i=Object(s.a)(l,2),m=i[0],u=i[1];return r.a.createElement(b.Provider,{value:{currentUser:c,setCurrentUser:o,signUpMsg:m,setSignUpMsg:u}},e.children)},O=a(3),w=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],m=Object(n.useState)(""),d=Object(s.a)(m,2),f=d[0],v=d[1],w=Object(n.useContext)(b),j=w.signUpMsg,y=w.setSignUpMsg,_=Object(n.useState)({username:"",password:"",common:""}),N=Object(s.a)(_,2),k=N[0],S=N[1];return Object(h.checkAuth)()?r.a.createElement(i.a,{to:{pathname:"/"}}):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"login"},j&&r.a.createElement("p",{className:"success_msg"},j),r.a.createElement("img",{src:g.a,alt:"logo",className:"login__logo"}),r.a.createElement(O.e,{onSubmit:function(e){e.preventDefault();var t=new Headers({Authorization:"Basic ".concat(u.a.encode("".concat(u.a.encode(c),":").concat(u.a.encode(f))))});fetch("/api/login",{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(e){if(200===e.status){if(o(""),v(""),e.token){var t=e.token;p.a.set("token",t,{expires:2})}y(""),window.location.replace("/")}else switch(e.field){case"common":S({username:"",password:"",common:e.msg});break;case"password":S({username:"",common:"",password:e.msg});break;case"username":S({password:"",common:"",username:e.msg});break;default:S({username:"",password:"",common:"Oops, something went wrong!"})}})).catch((function(e){S({username:"",password:"",common:"Oops, something went wrong!"})}))},className:"login__form"},r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"username"},"Username"),r.a.createElement(O.g,{type:"text",name:"username",id:"username",placeholder:"Your username",onChange:function(e){return o(e.target.value)},required:!0,value:c}),k.username&&r.a.createElement(E,{error:k.username})),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"password"},"Password"),r.a.createElement(O.g,{type:"password",name:"password",id:"password",placeholder:"Your password",onChange:function(e){return v(e.target.value)},required:!0,value:f}),k.password&&r.a.createElement(E,{error:k.password}),k.common&&r.a.createElement(E,{error:k.common})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Log in")),r.a.createElement("div",{className:"msg"},"Don't have an account? ",r.a.createElement(l.b,{to:"/signup"},"Sign up"))))},j=(a(313),a(357)),y=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(""),g=Object(s.a)(f,2),v=g[0],w=g[1],y=Object(n.useContext)(b).setSignUpMsg,_=Object(n.useState)({username:"",email:"",password:"",common:""}),N=Object(s.a)(_,2),k=N[0],S=N[1];return Object(h.checkAuth)()?r.a.createElement(i.a,{to:{pathname:"/"}}):r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"signup"},r.a.createElement("h1",null,"Register"),r.a.createElement(j.a,{className:"icon"}),r.a.createElement(O.e,{onSubmit:function(t){t.preventDefault();var a=new FormData;a.append("username",c),a.append("email",d),a.append("password",v),fetch("/api/signup",{method:"POST",body:a}).then((function(e){return e.json()})).then((function(t){if(200===t.status)o(""),p(""),w(""),y(t.msg),e.history.push("/login");else switch(t.field){case"username":S({username:t.msg,email:"",password:"",common:""});break;case"email":S({username:"",email:t.msg,password:"",common:""});break;case"password":S({username:"",email:"",password:t.msg,common:""});break;case"common":S({username:"",email:"",password:"",common:t.msg});break;default:S({username:"",email:"",password:"",common:"Oops, something went wrong!"})}})).catch((function(e){S({username:"",email:"",password:"",common:"Oops, something went wrong!"})}))},className:"signup__form"},r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"username"},"Username"),r.a.createElement(O.g,{type:"text",name:"username",value:c,id:"username",placeholder:"Choose a username",onChange:function(e){return o(e.target.value)},required:!0,minLength:"2",maxLength:"50"}),k.username&&r.a.createElement(E,{error:k.username})),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"email"},"Email"),r.a.createElement(O.g,{type:"email",name:"email",value:d,id:"email",placeholder:"yourmail@mail.com",onChange:function(e){return p(e.target.value)},required:!0,maxLength:"150"}),k.email&&r.a.createElement(E,{error:k.email})),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"password"},"Password"),r.a.createElement(O.g,{type:"password",name:"password",value:v,id:"password",placeholder:"Choose a password",onChange:function(e){return w(e.target.value)},required:!0,minLength:"8"}),k.password&&r.a.createElement(E,{error:k.password}),k.common&&r.a.createElement(E,{error:k.common})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Sign up")),r.a.createElement("div",{className:"msg"},"Already have an account? ",r.a.createElement(l.b,{to:"/login"},"Log in"))))},_=(a(314),a(315),a(166)),N=a.n(_),k=a(167),S=a.n(k),x=a(168),A=a.n(x),L=a(169),C=a.n(L),T=a(44),P=a.n(T),F=function(){var e=Object(n.useState)(!0),t=Object(s.a)(e,2),a=t[0],c=t[1],o=function(){return c(!a)};return r.a.createElement("header",{onClick:o,className:"header"},r.a.createElement(O.k,{color:"white",light:!0,className:"navbar-main"},r.a.createElement(O.l,{href:"/",className:"me-auto"},r.a.createElement(O.d,{className:"navbrand"},r.a.createElement(l.b,{style:{textDecoration:"none"},to:"/",exact:!0},r.a.createElement("img",{src:g.a,alt:"logo",className:"login__logo"}),r.a.createElement("h1",null,"Assessment")))),r.a.createElement(O.c,{isOpen:!a,navbar:!0,className:"collapse-menu"},r.a.createElement(O.i,{navbar:!0},r.a.createElement(O.j,null,r.a.createElement(l.c,{to:"/",exact:!0},r.a.createElement(N.a,null),"Dashboard")),r.a.createElement(O.j,null,r.a.createElement(l.c,{to:"/locations",exact:!0},r.a.createElement(P.a,null),"Locations")),r.a.createElement(O.j,null,r.a.createElement(l.c,{to:"/search"},r.a.createElement(S.a,null),"Search")),r.a.createElement(O.j,null,r.a.createElement(l.c,{to:"/newpost"},r.a.createElement(A.a,null),"New Location")),r.a.createElement(O.j,null,r.a.createElement(l.c,{to:"/profile"},r.a.createElement(C.a,null),"Profile")))),r.a.createElement(O.m,{onClick:o,className:"me-2"})))},D=(a(317),Object(n.createContext)()),G=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(s.a)(a,2),o=c[0],l=c[1];return Object(n.useEffect)((function(){fetch("/api/posts",{headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?l(e.posts):l("")})).catch((function(e){l("")}))}),[]),r.a.createElement(D.Provider,{value:{posts:o,setPosts:l}},t)},I=(a(318),a(171)),U=a.n(I),B=a(170),q=a.n(B),M=a(30),R=a.n(M),W=function(e){var t,a=e.id,c=e.public_id,o=e.author,i=e.img,m=e.post,u=(e.date_posted,e.latitude,e.longitude,Object(n.useContext)(D)),d=(u.posts,u.setPosts,Object(n.useState)("")),f=Object(s.a)(d,2),g=f[0],b=f[1],v=Object(n.useState)(!1),w=Object(s.a)(v,2),j=w[0],y=w[1],_=function(){y(!j)};return Object(h.checkAuth)()?r.a.createElement(O.b,{lg:"4",md:"6",sm:"6",xs:"12"},j&&r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"content"},r.a.createElement("span",{onClick:_,className:"close"},"\xd7"))),r.a.createElement("div",{className:"post__top"},r.a.createElement("h4",null,m)),r.a.createElement("div",{className:"post__img"},r.a.createElement("img",{onDoubleClick:null,src:i,alt:"post-img"})),g&&r.a.createElement(E,{error:g}),r.a.createElement("div",{className:"buttons__div"},r.a.createElement("div",{className:"buttons__div2"},r.a.createElement("div",{className:"post__fun"},r.a.createElement(l.b,{to:"/images/".concat(a),className:"comment_link"},r.a.createElement(O.a,null,r.a.createElement(q.a,{className:"icon"}),"Images"))),r.a.createElement("div",{className:"post__fun"},r.a.createElement(l.b,{to:"/comments/".concat(a),className:"comment_link"},r.a.createElement(O.a,null," ",r.a.createElement(U.a,{className:"icon"}),"Notes")))),r.a.createElement("div",{className:"buttons__div3"},r.a.createElement("div",{className:"post__post"},r.a.createElement("strong",null,"Author: "),o),(t=c,(Object(h.checkAuth)()?R.a.decode(p.a.get("token")).public_id===t:window.location.replace("/login"))?r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{onClick:function(){return function(e,t){if(!Object(h.checkAuth)())return window.location.replace("/login");fetch("/api/delete_post",{method:"DELETE",headers:{public_id:e,post_id:t,"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(_(),b(""),window.location.reload("/")):(_(),b("Oops, Some, error, happened!"))})).catch((function(e){_(),b("Oops, Some, error, happened!")}))}(c,a)}},"Delete")):null)))):window.location.replace("/login")},z=function(e){var t=Object(n.useContext)(D).posts,a=t.length>0?t.map((function(e){return r.a.createElement(W,{key:e.id,public_id:e.public_id,id:e.id,author:e.author,img:e.img,post:e.post,latitude:e.latitude,longitude:e.longitude})})):r.a.createElement("p",{className:"home__msg"},"Oops! No locations sites yet...");return Object(h.checkAuth)()?r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"heading__div"},r.a.createElement("h2",null,"Location Sites")),r.a.createElement(O.d,{className:"container"},r.a.createElement(O.n,{className:"row"},a))):window.location.replace("/login")},Y=(a(319),function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(s.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)(""),p=Object(s.a)(d,2),f=p[0],g=p[1],E=a&&a.map((function(e){return r.a.createElement("div",{key:e.id,className:"user"},r.a.createElement(l.b,{to:"images/".concat(e.id)},r.a.createElement("div",null,r.a.createElement("img",{className:"user__profile_pic",src:e.img,alt:"location image"}),r.a.createElement("span",{className:"user__username"},e.post))),r.a.createElement("div",null))}));return r.a.createElement("div",{className:"search"},r.a.createElement("h1",null,"Search"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault()}},r.a.createElement("input",{type:"text",placeholder:"Search Locations...",value:m,onChange:function(e){u(e.target.value),""!==e.target.value&&function(e){if(!Object(h.checkAuth)())return window.location.replace("/login");var t=new FormData;t.append("term",e),fetch("/api/search",{method:"POST",body:t,headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(g(""),c(e.posts)):404===e.status?(c(""),g("Oops, No locations found...")):(c(""),g("Oops, Some error happened! Try Again..."))})).catch((function(e){c(""),g("Oops, Some error happened! Try Again...")}))}(e.target.value)}})),r.a.createElement("p",{className:"search__message"},f&&f),r.a.createElement("div",{className:"search__results"},E))}),H=a(46),K=(a(320),a(53)),J=a.n(K),Z=a(45),V=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),i=Object(s.a)(l,2),m=i[0],u=i[1],d=Object(n.useState)(""),p=Object(s.a)(d,2),f=p[0],g=p[1],E=Object(n.useState)(""),b=Object(s.a)(E,2),v=b[0],w=b[1],j=Object(n.useState)(""),y=Object(s.a)(j,2),_=y[0],N=y[1],k=Object(Z.useGeolocated)({positionOptions:{enableHighAccuracy:!0},userDecisionTimeout:5e3}),S=k.coords,x=k.isGeolocationAvailable,A=k.isGeolocationEnabled,L=Object(n.useContext)(D),C=L.posts,T=L.setPosts;Object(n.useEffect)((function(){}),[]);var P=Object(n.useRef)(null),F=Object(n.useCallback)((function(){var e=P.current.getScreenshot();o(e)}),[P]),G=Object(n.useRef)(null),I={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return I.Android()||I.BlackBerry()||I.iOS()||I.Opera()||I.Windows()}};return r.a.createElement("div",{className:"newpost"},r.a.createElement("div",{className:"mt"},r.a.createElement("h2",null,"Add New Location"),r.a.createElement("br",null),I.any()?""!=c?r.a.createElement("img",{src:c,className:"img"}):r.a.createElement("p",null,"Capture an image to view it here"):""!=c?r.a.createElement("img",{src:c,className:"img"}):r.a.createElement(J.a,{audio:!1,height:500,ref:P,screenshotFormat:"image/jpeg",width:500,videoConstraints:{width:500,height:500,facingMode:"environment"}})),I.any()?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("label",{for:"file",className:"label"},"Capture Image"),r.a.createElement("input",{accept:"image/*",id:"file",type:"file",capture:"environment",ref:G,onChange:function(e){return function(e){if(e.files&&0!==e.files.length){var t=e.files[0],a=URL.createObjectURL(t);o(a)}}(e.target)},style:{visibility:"hidden"}})):""===c?r.a.createElement(O.a,{onClick:F},"Capture Image"):r.a.createElement(O.a,{onClick:function(){o("")}},"Retake"),r.a.createElement("br",null),r.a.createElement("br",null),f&&r.a.createElement("p",{className:"newpost__error"},"Oops, Some Error happened! Try Again..."),r.a.createElement(O.e,{onSubmit:function(t){if(t.preventDefault(),!Object(h.checkAuth)())return window.location.replace("/login");if(""===c)return window.alert("Image Not Set");""===v&&w(S.latitude),""===_&&w(S.longitude);var a=new FormData;a.append("text",m),a.append("img",function(e){for(var t=atob(e.split(",")[1]),a=new ArrayBuffer(t.length),n=new Uint8Array(a),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return new Blob([a],{type:"image/jpeg"})}(c)),a.append("lat",v),a.append("long",_),fetch("/api/newpost",{method:"POST",body:a,headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(t){200===t.status?(T([t.post].concat(Object(H.a)(C))),u(""),window.alert("Successfully added new location site"),e.history.push("/locations")):g("Oops, Some error happened! Try Again...")})).catch((function(e){g("Oops, Some error happened! Try Again...")}))}},r.a.createElement(O.f,null,""!=c?r.a.createElement(O.h,{style:{color:"green"},for:"img"},r.a.createElement("strong",null,"Image Set")):r.a.createElement(O.h,{style:{color:"red"},for:"img"},r.a.createElement("strong",null,"Image not set... Capture a photo"))),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"siteName"},r.a.createElement("strong",null,"Location Site Name")),r.a.createElement(O.g,{type:"text",name:"name",id:"siteName",placeholder:"Enter Site Name",onChange:function(e){return u(e.target.value)},required:!0})),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"img"},r.a.createElement("strong",null,"Location:")),x?A?S?r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",null,"Latitude")),r.a.createElement("td",null,S.latitude)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",null,"Longitude")),r.a.createElement("td",null,S.longitude)))):r.a.createElement("div",null,"Getting the location data\u2026 "):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Geolocation is not enabled... Manually enter location"),r.a.createElement("br",null),r.a.createElement(O.f,{className:"center"},r.a.createElement(O.h,{for:"latitude"},r.a.createElement("strong",null,"Latitude")),r.a.createElement(O.g,{type:"text",name:"latitude",id:"latitude",placeholder:"Enter Latitude",value:v,onChange:function(e){return w(e.target.value)},required:!0})),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"longitude"},r.a.createElement("strong",null,"Longitude")),r.a.createElement(O.g,{type:"text",name:"longitude",id:"siteName",placeholder:"Enter Longitude",value:_,onChange:function(e){return N(e.target.value)},required:!0}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Your browser does not support Geolocation... Manually enter location"),r.a.createElement("br",null),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"latitude"},r.a.createElement("strong",null,"Latitude")),r.a.createElement(O.g,{type:"text",name:"latitude",id:"latitude",placeholder:"Enter Latitude",onChange:function(e){return w(e.target.value)},required:!0})),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"longitude"},r.a.createElement("strong",null,"Longitude")),r.a.createElement(O.g,{type:"text",name:"longitude",id:"siteName",placeholder:"Enter Longitude",onChange:function(e){return N(e.target.value)},required:!0})))),r.a.createElement(O.a,null,"Add Location Site")))},Q=(a(327),function(e){var t=e.match.params.id,a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],i=c[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),d=(u[0],u[1]),p=Object(n.useState)(""),f=Object(s.a)(p,2),g=f[0],E=f[1],b=Object(n.useState)(""),v=Object(s.a)(b,2),w=v[0],j=v[1],y=Object(n.useState)(""),_=Object(s.a)(y,2),N=_[0],k=_[1],S=Object(n.useState)(""),x=Object(s.a)(S,2),A=x[0],L=x[1],C=Object(Z.useGeolocated)({positionOptions:{enableHighAccuracy:!0},userDecisionTimeout:5e3}),T=C.coords,P=C.isGeolocationAvailable,F=C.isGeolocationEnabled,G=Object(n.useContext)(D),I=(G.posts,G.setPosts,r.a.useRef(null)),U=r.a.useCallback((function(){var e=I.current.getScreenshot();i(e)}),[I]),B=Object(n.useRef)(null),q={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return q.Android()||q.BlackBerry()||q.iOS()||q.Opera()||q.Windows()}};return r.a.createElement("div",{className:"newpost"},r.a.createElement("h2",null,"Add New Image"),r.a.createElement("br",null),r.a.createElement("div",{className:"back"},r.a.createElement(l.b,{to:"/locations"},r.a.createElement(O.a,null,"Back"))),r.a.createElement("br",null),r.a.createElement("div",null,q.any()?""!=o?r.a.createElement("img",{src:o,className:"img"}):r.a.createElement("p",null,"Capture an image to view it here"):""!=o?r.a.createElement("img",{src:o,className:"img"}):r.a.createElement(J.a,{audio:!1,height:500,ref:I,screenshotFormat:"image/jpeg",width:500,videoConstraints:{width:500,height:500,facingMode:"environment"}})),q.any()?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("label",{for:"file",className:"label"},"Capture Image"),r.a.createElement("input",{accept:"image/*",id:"file",type:"file",capture:"environment",ref:B,onChange:function(e){return function(e){if(e.files&&0!==e.files.length){var t=e.files[0],a=URL.createObjectURL(t);i(a)}}(e.target)},style:{visibility:"hidden"}})):""===o?r.a.createElement(O.a,{onClick:U},"Capture Image"):r.a.createElement(O.a,{onClick:function(){i("")}},"Retake"),r.a.createElement("br",null),r.a.createElement("br",null),g&&r.a.createElement("p",{className:"newpost__error"},"Oops, Some Error happened! Try Again..."),r.a.createElement(O.e,{onSubmit:function(a){if(a.preventDefault(),!Object(h.checkAuth)())return window.location.replace("/login");if(""===o)return window.alert("Image Not Set");""===N&&k(T.latitude),""===A&&k(T.longitude);var n=new FormData;n.append("name",w),n.append("id",t),n.append("img",function(e){for(var t=atob(e.split(",")[1]),a=new ArrayBuffer(t.length),n=new Uint8Array(a),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return new Blob([a],{type:"image/jpeg"})}(o)),n.append("lat",N),n.append("long",A),fetch("/api/add_image",{method:"POST",body:n,headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(a){200===a.status?(j(""),d(""),window.alert("Successfully added new image"),e.history.push("/images/".concat(t))):E("Oops, Some error happened! Try Again...")})).catch((function(e){E("Oops, Some error happened! Try Again...")}))}},r.a.createElement(O.f,null,""!=o?r.a.createElement(O.h,{style:{color:"green"},for:"img"},r.a.createElement("strong",null,"Image Set")):r.a.createElement(O.h,{style:{color:"red"},for:"img"},r.a.createElement("strong",null,"Image not set... Capture a photo"))),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"imageName"},r.a.createElement("strong",null,"Image Name")),r.a.createElement(O.g,{type:"text",name:"name",id:"imageName",placeholder:"Enter Image Name",onChange:function(e){return j(e.target.value)},required:!0})),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"location"},r.a.createElement("strong",null,"Location:")),P?F?T?r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"latitude"),r.a.createElement("td",null,T.latitude)),r.a.createElement("tr",null,r.a.createElement("td",null,"longitude"),r.a.createElement("td",null,T.longitude)))):r.a.createElement("div",null,"Getting the location data\u2026 "):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Geolocation is not enabled... Manually enter location"),r.a.createElement("br",null),r.a.createElement(O.f,{className:"center"},r.a.createElement(O.h,{for:"latitude"},r.a.createElement("strong",null,"Latitude")),r.a.createElement(O.g,{type:"text",name:"latitude",id:"latitude",placeholder:"Enter Latitude",value:N,onChange:function(e){return k(e.target.value)},required:!0})),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"longitude"},r.a.createElement("strong",null,"Longitude")),r.a.createElement(O.g,{type:"text",name:"longitude",id:"siteName",placeholder:"Enter Longitude",value:A,onChange:function(e){return L(e.target.value)},required:!0}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Your browser does not support Geolocation... Manually enter location"),r.a.createElement("br",null),r.a.createElement(O.f,{className:"center"},r.a.createElement(O.h,{for:"latitude"},r.a.createElement("strong",null,"Latitude")),r.a.createElement(O.g,{type:"text",name:"latitude",id:"latitude",placeholder:"Enter Latitude",onChange:function(e){return k(e.target.value)},required:!0})),r.a.createElement(O.f,{className:"center"},r.a.createElement(O.h,{for:"longitude"},r.a.createElement("strong",null,"Longitude")),r.a.createElement(O.g,{type:"text",name:"longitude",id:"siteName",placeholder:"Enter Longitude",onChange:function(e){return L(e.target.value)},required:!0})))),r.a.createElement(O.a,null,"Add Image Object")))}),X=a(172);a(328);function $(){$=function(){return e};var e={},t=Object.prototype,a=t.hasOwnProperty,n=Object.defineProperty||function(e,t,a){e[t]=a.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function i(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(x){i=function(e,t,a){return e[t]=a}}function s(e,t,a,r){var c=t&&t.prototype instanceof d?t:d,o=Object.create(c.prototype),l=new N(r||[]);return n(o,"_invoke",{value:w(e,a,l)}),o}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(x){return{type:"throw",arg:x}}}e.wrap=s;var u={};function d(){}function p(){}function h(){}var f={};i(f,c,(function(){return this}));var g=Object.getPrototypeOf,E=g&&g(g(k([])));E&&E!==t&&a.call(E,c)&&(f=E);var b=h.prototype=d.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){var r;n(this,"_invoke",{value:function(n,c){function o(){return new t((function(r,o){!function n(r,c,o,l){var i=m(e[r],e,c);if("throw"!==i.type){var s=i.arg,u=s.value;return u&&"object"==typeof u&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(u).then((function(e){s.value=e,o(s)}),(function(e){return n("throw",e,o,l)}))}l(i.arg)}(n,c,r,o)}))}return r=r?r.then(o,o):o()}})}function w(e,t,a){var n="suspendedStart";return function(r,c){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===r)throw c;return S()}for(a.method=r,a.arg=c;;){var o=a.delegate;if(o){var l=j(o,a);if(l){if(l===u)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===n)throw n="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n="executing";var i=m(e,t,a);if("normal"===i.type){if(n=a.done?"completed":"suspendedYield",i.arg===u)continue;return{value:i.arg,done:a.done}}"throw"===i.type&&(n="completed",a.method="throw",a.arg=i.arg)}}}function j(e,t){var a=t.method,n=e.iterator[a];if(void 0===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),u;var r=m(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var c=r.arg;return c?c.done?(t[e.resultName]=c.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function y(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(y,this),this.reset(!0)}function k(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=i(h,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,i(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(O.prototype),i(O.prototype,o,(function(){return this})),e.AsyncIterator=O,e.async=function(t,a,n,r,c){void 0===c&&(c=Promise);var o=new O(s(t,a,n,r),c);return e.isGeneratorFunction(a)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},v(b),i(b,l,"Generator"),i(b,c,(function(){return this})),i(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=k,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(a,n){return o.type="throw",o.arg=e,t.next=a,n&&(t.method="next",t.arg=void 0),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],o=c.completion;if("root"===c.tryLoc)return n("end");if(c.tryLoc<=this.prev){var l=a.call(c,"catchLoc"),i=a.call(c,"finallyLoc");if(l&&i){if(this.prev<c.catchLoc)return n(c.catchLoc,!0);if(this.prev<c.finallyLoc)return n(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return n(c.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return n(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var o=c?c.completion:{};return o.type=e,o.arg=t,c?(this.method="next",this.next=c.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),_(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;_(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:k(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},e}var ee=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(s.a)(o,2),i=l[0],m=l[1],u=function(){var e=Object(X.a)($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(h.checkAuth)()){e.next=2;break}return e.abrupt("return",window.location.replace("/login"));case 2:return e.next=4,p.a.remove("token");case 4:return e.abrupt("return",window.location.replace("/login"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(Object(n.useEffect)((function(){fetch("/api/get_current_user",{method:"GET",headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(m(""),c(e.user)):m("Oops, Some error happened!")})).catch((function(e){m("Oops, Some error happened!")}))}),[]),!Object(h.checkAuth)())return window.location.replace("/login");var d=a?r.a.createElement("div",null,r.a.createElement("div",{className:"profile__top"},"User Profile"),r.a.createElement("div",{className:"profile__header"},r.a.createElement("div",{className:"profile__header__details"},r.a.createElement("p",null,"Username:"),r.a.createElement("p",{className:"profile__header__username"},a.username),r.a.createElement("p",null,"Email:"),r.a.createElement("p",{className:"profile__header__username"},a.email)),r.a.createElement("div",{className:"profile__header__logout"},r.a.createElement("button",{onClick:u,className:"btn btn-primary",href:"/logout"},"Logout"))),r.a.createElement("div",{className:"profile__body_top"},r.a.createElement("div",null)),r.a.createElement("div",{className:"profile__body_middle"},r.a.createElement("span",{className:"profile__verbose"},"Posts: "),r.a.createElement("span",{className:"profile__number"},r.a.createElement("strong",null,a.posts))),r.a.createElement("a",{className:"profile__body_edit-btn btn btn-primary",href:"/edit_profile"},"Edit Profile")):r.a.createElement("p",{className:"msg"},i);return r.a.createElement("div",{className:"profile"},d)},te=(a(329),function(e){var t=Object(n.useState)(),a=Object(s.a)(t,2),c=(a[0],a[1],Object(n.useState)("")),o=Object(s.a)(c,2),l=o[0],i=o[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)({username:"",email:"",common:""}),g=Object(s.a)(f,2),b=g[0],v=g[1];Object(n.useEffect)((function(){if(!Object(h.checkAuth)())return window.location.replace("/login");fetch("/api/get_current_user",{method:"GET",headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(i(e.user.username),p(e.user.email)):v({username:"",email:"",password:"",common:"Oops, something went wrong!"})})).catch((function(e){v({username:"",email:"",password:"",common:"Oops, something went wrong!"})}))}),[]);return Object(h.checkAuth)()?r.a.createElement("div",{className:"edit_profile"},r.a.createElement("p",{className:"edit_profile__top"},"Edit Profile"),r.a.createElement(O.e,{onSubmit:function(e){if(e.preventDefault(),!Object(h.checkAuth)())return window.location.replace("/login");var t=new FormData;t.append("username",l),t.append("email",d),fetch("/api/update_profile",{method:"PUT",body:t,headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){if(200===e.status)window.location.replace("/profile");else switch(e.field){case"username":v({username:e.msg,email:"",common:""});break;case"email":v({username:"",email:e.msg,common:""});break;case"common":v({username:"",email:"",common:e.msg});break;default:v({username:"",email:"",common:"Oops, something went wrong!"})}})).catch((function(e){v({username:"",email:"",common:"Oops, something went wrong!"})}))},className:"login__form"},b.common&&r.a.createElement(E,{error:b.common}),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"username"},"Username"),r.a.createElement(O.g,{type:"text",name:"username",id:"username",placeholder:"Username",onChange:function(e){return i(e.target.value)},required:!0,value:l}),b.username&&r.a.createElement(E,{error:b.username})),r.a.createElement(O.f,null,r.a.createElement(O.h,{for:"email"},"Email"),r.a.createElement(O.g,{type:"email",name:"email",id:"email",placeholder:"Email",onChange:function(e){return p(e.target.value)},required:!0,value:d}),b.email&&r.a.createElement(E,{error:b.email})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Update"))):window.location.replace("/login")}),ae=(a(330),Object(n.createContext)()),ne=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(s.a)(a,2),o=c[0],l=c[1];return r.a.createElement(ae.Provider,{value:{comments:o,setComments:l}},t)},re=function(e){var t,a=e.match.params.id,c=Object(n.useState)("Loading..."),o=Object(s.a)(c,2),i=o[0],m=o[1],u=Object(n.useContext)(ae),d=u.comments,f=u.setComments,g=Object(n.useContext)(D).posts,E=Object(n.useState)(""),b=Object(s.a)(E,2),v=b[0],w=b[1],j=R.a.decode(p.a.get("token")).public_id,y=Object(n.useState)(""),_=Object(s.a)(y,2),N=(_[0],_[1]),k=Object(n.useState)(!1),S=Object(s.a)(k,2),x=S[0],A=S[1],L=function(){A(!x)};t=g.find((function(e){return String(e.id)===String(a)}));Object(n.useEffect)((function(){!function(){if(!Object(h.checkAuth)())return window.location.replace("/login");t?fetch("/api/comments",{method:"GET",headers:{"x-access-token":Object(h.getToken)(),id:a}}).then((function(e){return e.json()})).then((function(e){200===e.status?(m(""),f(e.comments)):m("Oops, Something went wrong!!!")})).catch((function(e){m("No Posts Found!")})):m("No Locations Found!")}()}),[t]);var C=t&&r.a.createElement("div",{className:"comments__body"},r.a.createElement("div",{className:"real_post"},r.a.createElement("div",{className:"real_post_left"}),r.a.createElement("div",{className:"real_post_right"},r.a.createElement("br",null),r.a.createElement("img",{className:"comments__img",src:t.img}),r.a.createElement("strong",null," ",t.post))),d.length>0?r.a.createElement("div",{className:"comments"},d.map((function(e){return r.a.createElement("div",{key:e.id,className:"comment"},r.a.createElement("div",{className:"comments__left"}),r.a.createElement("div",{className:"comments__right"},r.a.createElement("div",{className:"comments__right_top"},r.a.createElement("strong",null,e.commentator),r.a.createElement("span",null,e.comment),r.a.createElement(O.a,{onClick:function(){return function(e,t,a){if(!Object(h.checkAuth)())return window.location.replace("/login");fetch("/api/delete_comment",{method:"DELETE",headers:{public_id:e,post_id:t,comment_id:a,"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(L(),N(""),window.location.reload("/")):(L(),N("Oops, Some, error, happened!"))})).catch((function(e){L(),N("Oops, Some, error, happened!")}))}(j,a,e.id)}},"delete")),r.a.createElement("div",{className:"comments__extras"},r.a.createElement("span",null,e.date_posted))))}))):r.a.createElement("p",{className:"msg"},"No Notes Found!!!"),r.a.createElement("form",{className:"add_comment",onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("comment",v),t.append("id",a),fetch("/api/add_comment",{method:"POST",body:t,headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(m(""),f([].concat(Object(H.a)(d),[e.comment])),w("")):m("Oops some error happened")})).catch((function(e){m("Oops some error happened")}))}},r.a.createElement("input",{type:"text",required:!0,placeholder:"Add a note...",className:"comment_box",value:v,onChange:function(e){w(e.target.value)}}),r.a.createElement("button",{type:"submit",className:"btn btn-primary post-btn"},"Add")));return Object(h.checkAuth)()?r.a.createElement("div",{className:"comments"},r.a.createElement("div",{className:"comments__header"},r.a.createElement("h2",null,"Notes")),r.a.createElement("div",{className:"back"},r.a.createElement(l.b,{to:"/locations"},r.a.createElement(O.a,null,"Back"))),i&&r.a.createElement("p",{className:"msg"},i),C):window.location.replace("/login")},ce=(a(331),Object(n.createContext)()),oe=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(s.a)(a,2),o=c[0],l=c[1];return r.a.createElement(ce.Provider,{value:{images:o,setImages:l}},t)},le=a(71),ie="Insert API Key here",se=function(e){var t,a=e.match.params.id,c=Object(n.useState)("Loading..."),o=Object(s.a)(c,2),i=o[0],m=o[1],u=Object(n.useContext)(ce),d=u.images,f=u.setImages,g=Object(n.useContext)(D).posts,E=Object(n.useState)(""),b=Object(s.a)(E,2),v=b[0],w=b[1],j=R.a.decode(p.a.get("token")).public_id,y=Object(n.useState)(""),_=Object(s.a)(y,2),N=(_[0],_[1]),k=Object(n.useState)(!1),S=Object(s.a)(k,2),x=S[0],A=S[1],L=Object(n.useState)(""),C=Object(s.a)(L,2),T=C[0],F=(C[1],Object(Z.useGeolocated)({positionOptions:{enableHighAccuracy:!0},userDecisionTimeout:5e3})),G=F.coords,I=(F.isGeolocationAvailable,F.isGeolocationEnabled,function(){A(!x)});t=g.find((function(e){return String(e.id)===String(a)}));var U=function(e){return r.a.createElement("p",{style:{color:"blue"}},r.a.createElement(P.a,{style:{color:"red"}}),e.name)},B={center:{lat:-33.9249,lng:18.4241},zoom:9};Object(n.useEffect)((function(){!function(){if(!Object(h.checkAuth)())return window.location.replace("/login");t?fetch("/api/images",{method:"GET",headers:{"x-access-token":Object(h.getToken)(),id:a}}).then((function(e){return e.json()})).then((function(e){200===e.status?(m(""),f(e.images)):m("Oops, Something went wrong!!!")})).catch((function(e){m("No Sites Found!")})):m("No Posts Found!")}()}),[t]);var q=t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"images__body"},r.a.createElement("div",{className:"real_post"},r.a.createElement("br",null),r.a.createElement("h2",null," ",t.post),r.a.createElement("br",null),r.a.createElement("img",{className:"post_image",src:t.img}),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Timestamp: "),t.date_posted)),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Latitude: "),t.latitude)),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("strong",null,"Longitude: "),t.longitude)),r.a.createElement("div",{className:"images__extras"},r.a.createElement("span",null,"Author: ",t.author))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h1",null,"Mapped Image Geolocations"),r.a.createElement("div",{style:{height:"60vh",width:"70vw"}},r.a.createElement(le.a,{bootstrapURLKeys:{key:ie},defaultCenter:B.center,defaultZoom:B.zoom},d.length>0?d.map((function(e,t){return r.a.createElement(U,{key:t.toString(),name:e.name,lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)})})):null)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"Images"),r.a.createElement("br",null),d.length>0?r.a.createElement("div",{className:"images"},d.map((function(e){return r.a.createElement("div",{key:e.id,className:"image"},r.a.createElement("div",{className:"images__left"},r.a.createElement("img",{className:"image_img",src:e.img,alt:"img"})),r.a.createElement("div",{className:"images__right"},r.a.createElement("h5",null,r.a.createElement("strong",null,e.name)),r.a.createElement("h5",null,e.date_posted.slice(0,9)),r.a.createElement("h5",null,e.date_posted.slice(10)),r.a.createElement("div",{className:"images__right_top"},r.a.createElement("strong",null,"Latitude"),r.a.createElement("span",null,e.latitude)),r.a.createElement("div",{className:"images__right_top"},r.a.createElement("strong",null,"Longitude"),r.a.createElement("span",null,e.longitude)),r.a.createElement("div",{className:"images__right_top"},r.a.createElement(O.a,{onClick:function(){return function(e,t,a){if(!Object(h.checkAuth)())return window.location.replace("/login");fetch("/api/delete_image",{method:"DELETE",headers:{public_id:e,post_id:t,image_id:a,"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(I(),N(""),window.location.reload(!0)):(I(),N("Oops, Some, error, happened!"))})).catch((function(e){I(),N("Oops, Some, error, happened!")}))}(j,a,e.id)}},"delete")),r.a.createElement("div",{className:"images__extras"},r.a.createElement("span",null,"Author: ",e.author))))}))):r.a.createElement("p",{className:"msg"},"No Images Found!!!")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("name",v),t.append("id",a),t.append("img",function(e){for(var t=atob(e.split(",")[1]),a=new ArrayBuffer(t.length),n=new Uint8Array(a),r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return new Blob([a],{type:"image/jpeg"})}(T)),t.append("lat",G.latitude),t.append("long",G.longitude),fetch("/api/add_image",{method:"POST",body:t,headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(m(""),f([].concat(Object(H.a)(d),[e.image])),w(""),window.location.reload(!0)):m("Oops some error happened")})).catch((function(e){m("Oops some error happened")}))}},r.a.createElement("div",{className:"add_image"},r.a.createElement("div",{className:"input_div"},r.a.createElement(l.b,{to:"/newimage/".concat(a)},r.a.createElement(O.a,{className:"btn btn-primary post-btn"},"Add New Image"))))));return Object(h.checkAuth)()?r.a.createElement("div",{className:"images"},r.a.createElement("div",{className:"back"},r.a.createElement(l.b,{to:"/locations"},r.a.createElement(O.a,null,"Back"))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"images__header"},r.a.createElement("h1",null,"Location Site Images")),i&&r.a.createElement("p",{className:"msg"},i),q):window.location.replace("/login")};a(332);var me=function(e){var t=Object(n.useContext)(D).posts,a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],i=c[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),d=(u[0],u[1]);if(Object(n.useEffect)((function(){fetch("/api/get_current_user",{method:"GET",headers:{"x-access-token":Object(h.getToken)()}}).then((function(e){return e.json()})).then((function(e){200===e.status?(d(""),i(e.user)):d("Oops, Some error happened!")})).catch((function(e){d("Oops, Some error happened!")}))}),[]),!Object(h.checkAuth)())return window.location.replace("/login");var p=function(e){return r.a.createElement("p",{style:{color:"blue"}},r.a.createElement(P.a,{style:{color:"red"}}),e.title)},f={center:{lat:-33.9249,lng:18.4241},zoom:9};return Object(h.checkAuth)()?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"dashboard"},r.a.createElement("div",{className:"dashboard__text"},r.a.createElement("h1",null,"Dashboard"),r.a.createElement("div",{className:"welcome"},r.a.createElement("h5",null,"Welcome: ",o.username)),r.a.createElement("h3",null,"Locations Sites: ",t.length)),r.a.createElement("div",{className:"map__div"},t?r.a.createElement(le.a,{bootstrapURLKeys:{key:ie},defaultCenter:f.center,defaultZoom:f.zoom},t.length>0?t.map((function(e,t){return r.a.createElement(p,{key:t.toString(),title:e.post,lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)})})):null):null),r.a.createElement("div",{className:"locations__btn"},r.a.createElement(l.b,{to:"/locations"},r.a.createElement(O.a,{size:"lg"},"View Locations"))))):window.location.replace("/login")},ue=function(){return r.a.createElement(l.a,null,r.a.createElement(F,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/search",component:Y}),r.a.createElement(i.b,{path:"/newpost",component:V}),r.a.createElement(i.b,{path:"/profile",component:ee}),r.a.createElement(i.b,{path:"/edit_profile",component:te}),r.a.createElement(i.b,{path:"/comments/:id",component:re}),r.a.createElement(i.b,{path:"/images/:id",component:se}),r.a.createElement(i.b,{path:"/newimage/:id",component:Q}),r.a.createElement(i.b,{path:"/dashboard",component:me}),r.a.createElement(i.b,{path:"/locations",exact:!0,component:z}),r.a.createElement(i.b,{path:"/",exact:!0,component:me})))},de=a(174),pe=["component"],he=a(6).checkAuth,fe=function(e){var t=e.component,a=Object(de.a)(e,pe);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return he()?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/login"}})}}))},ge=function(){return r.a.createElement(l.a,null,r.a.createElement(G,null,r.a.createElement(v,null,r.a.createElement(ne,null,r.a.createElement(oe,null,r.a.createElement("div",{className:"container"},r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login",component:w}),r.a.createElement(i.b,{path:"/signup",component:y}),r.a.createElement(fe,{path:"/search",exact:!0,component:ue}),r.a.createElement(fe,{path:"/newpost",exact:!0,component:ue}),r.a.createElement(fe,{path:"/profile",exact:!0,component:ue}),r.a.createElement(fe,{path:"/comments/:id",exact:!0,component:ue}),r.a.createElement(fe,{path:"/images/:id",exact:!0,component:ue}),r.a.createElement(fe,{path:"/newimage/:id",exact:!0,component:ue}),r.a.createElement(fe,{path:"/edit_profile",exact:!0,component:ue}),r.a.createElement(fe,{path:"/",exact:!0,component:ue}),r.a.createElement(fe,{path:"/dashboard",exact:!0,component:ue}),r.a.createElement(fe,{path:"/locations",exact:!0,component:ue}))))))))};a(333);o.a.render(r.a.createElement(ge,null),document.getElementById("root"))},6:function(e,t,a){"use strict";a.r(t),a.d(t,"checkAuth",(function(){return l})),a.d(t,"getToken",(function(){return i}));var n=a(18),r=a.n(n),c=a(30),o=a.n(c),l=function(){try{var e=r.a.get("token");return!!e&&!(o.a.decode(e).exp<(new Date).getTime()/1e3)}catch(t){return!1}},i=function(){if(l())return r.a.get("token")}},66:function(e,t,a){e.exports=a.p+"static/media/logo.4767f928.jpg"}},[[178,1,2]]]);
//# sourceMappingURL=main.68f41ec1.chunk.js.map