{"version":3,"sources":["components/ErrorField/ErrorField.js","contexts/AuthContext.js","pages/Login/Login.js","pages/Signup/Signup.js","components/Header/Header.js","contexts/PostContext.js","components/Post/Post.js","pages/Home/Home.js","pages/Search/Search.js","pages/NewPost/NewPost.js","pages/NewImage/NewImage.js","pages/Profile/Profile.js","pages/EditProfile/EditProfile.js","contexts/CommentContext.js","pages/Comments/Comments.js","contexts/ImageContext.js","config.js","pages/Images/Images.js","pages/Dashboard/Dashboard.js","containers/Main/Main.js","PrivateRoute.js","App.js","index.js","utils.js","assets/logo.jpg"],"names":["ErrorField","error","className","AuthContext","createContext","AuthContextProvider","props","useState","currentUser","setCurrentUser","signUpMsg","setSignUpMsg","Provider","value","children","Login","username","setUsername","password","setPassword","useContext","common","errors","setErrors","checkAuth","to","pathname","src","Logo","alt","onSubmit","e","preventDefault","headers","Headers","base64","encode","fetch","method","then","res","json","data","status","token","cookies","set","expires","window","location","replace","field","msg","catch","for","type","name","id","placeholder","onChange","target","required","Signup","email","setEmail","Avatar","formdata","FormData","append","body","history","push","minLength","maxLength","Header","collapsed","setCollapsed","toggleNavbar","onClick","color","light","href","style","textDecoration","exact","isOpen","navbar","PostContext","PostContextProvider","posts","setPosts","useEffect","getToken","Post","pid","public_id","author","img","post","date_posted","latitude","longitude","setError","modal","setModal","toggleModal","lg","md","sm","xs","onDoubleClick","jwt","decode","Cookie","get","post_id","reload","deletePost","Home","postList","length","map","key","Search","results","setResults","search","setSearch","message","setMessage","output","result","makeSearch","NewPost","setImg","text","setText","setLatitude","setLongitude","useGeolocated","positionOptions","enableHighAccuracy","userDecisionTimeout","coords","isGeolocationAvailable","isGeolocationEnabled","webcamRef","useRef","capture","useCallback","imageSrc","current","getScreenshot","handleFileInput","isMobile","Android","navigator","userAgent","match","BlackBerry","iOS","Opera","Windows","any","audio","height","ref","screenshotFormat","width","videoConstraints","facingMode","accept","files","file","newUrl","URL","createObjectURL","handleCapture","visibility","alert","image","byteString","atob","split","ab","ArrayBuffer","ia","Uint8Array","i","charCodeAt","Blob","convertBase64ToFile","NewImage","params","setImage","React","Profile","setMsg","logout","remove","user","component","EditProfile","CommentContext","CommentContextProvider","comments","setComments","Comments","comment","setComment","find","String","getComments","commentator","comment_id","deleteComment","ImageContext","ImageContextProvider","images","setImages","MAPS_API","Images","MapMarker","defaultProps","center","lat","lng","zoom","getImages","bootstrapURLKeys","defaultCenter","defaultZoom","im","toString","parseFloat","slice","image_id","deleteImage","Dashboard","title","size","Main","path","require","PrivateRoute","Component","rest","render","App","ReactDOM","document","getElementById","exp","Date","getTime","module","exports"],"mappings":"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","file":"static/js/main.68f41ec1.chunk.js","sourcesContent":["import React from 'react';\n\nimport './ErrorField.css';\n\nconst ErrorField = ({ error }) => {\n  return (\n    <p className=\"error_field\">\n      {error}\n    </p>\n  );\n}\n\nexport default ErrorField;","import React, { createContext, useState } from 'react';\nexport const AuthContext = createContext();\n\nconst AuthContextProvider = (props) => {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [signUpMsg, setSignUpMsg] = useState('');\n\n  return (\n    <AuthContext.Provider value={{\n      currentUser,\n      setCurrentUser,\n      signUpMsg,\n      setSignUpMsg\n    }}>\n      {props.children}\n    </AuthContext.Provider>\n  );\n}\n\nexport default AuthContextProvider;","import React, { useState, useContext } from 'react';\nimport base64 from 'base-64';\nimport cookies from 'js-cookie';\nimport { checkAuth } from '../../utils';\n\nimport './Login.css';\n\nimport Logo from '../../assets/logo.jpg';\nimport { Link, Redirect } from 'react-router-dom';\nimport ErrorField from '../../components/ErrorField/ErrorField';\nimport { AuthContext } from '../../contexts/AuthContext';\nimport { Button, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\n\nconst Login = (props) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const { signUpMsg, setSignUpMsg } = useContext(AuthContext);\n\n  const [errors, setErrors] = useState({\n    username: '',\n    password: '',\n    common: ''\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const headers = new Headers({\n      \"Authorization\": `Basic ${base64.encode(`${base64.encode(username)}:${base64.encode(password)}`)}`\n    });\n\n    fetch('/api/login', {\n      method: 'GET',\n      headers: headers\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.status === 200) {\n          // everything went well, redirect to Login\n          setUsername('');\n          setPassword('');\n\n          if (data['token']) {\n            const token = data['token'];\n\n            cookies.set('token', token, {\n              expires: 2\n            })\n\n          }\n\n          setSignUpMsg('');\n          window.location.replace('/');\n        } else {\n          switch (data.field) {\n            case \"common\":\n              setErrors({\n                username: '',\n                password: '',\n                common: data.msg\n              })\n              break;\n            case \"password\":\n              setErrors({\n                username: '',\n                common: '',\n                password: data.msg\n              })\n              break;\n            case \"username\":\n              setErrors({\n                password: '',\n                common: '',\n                username: data.msg\n              })\n              break;\n            default:\n              setErrors({\n                username: '',\n                password: '',\n                common: \"Oops, something went wrong!\"\n              })\n              break;\n          }\n        }\n      })\n      .catch(e => {\n        setErrors({\n          username: '',\n          password: '',\n          common: \"Oops, something went wrong!\"\n        })\n      });\n  }\n\n  if (checkAuth()) {\n    return <Redirect to={{\n      pathname: '/'\n    }} />\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"login\">\n        {signUpMsg && <p className=\"success_msg\">{signUpMsg}</p>}\n\n        <img src={Logo} alt=\"logo\" className=\"login__logo\" />\n        <Form onSubmit={handleSubmit} className=\"login__form\">\n        <FormGroup>\n          <Label for=\"username\">Username</Label>\n          <Input type=\"text\" name=\"username\" id=\"username\" placeholder=\"Your username\" \n          onChange={e => setUsername(e.target.value)} required\n          value={username}\n          />\n        {errors.username && <ErrorField error={errors.username} />}\n        </FormGroup>\n        <FormGroup>\n          <Label for=\"password\">Password</Label>\n          <Input type=\"password\" name=\"password\" id=\"password\" placeholder=\"Your password\" \n          onChange={e => setPassword(e.target.value)} required\n          value={password}\n          />\n         {errors.password && <ErrorField error={errors.password} />}\n          {errors.common && <ErrorField error={errors.common} />}\n        </FormGroup>\n        <button type=\"submit\" className=\"btn btn-primary\">Log in</button>\n\n      </Form>\n      <div className=\"msg\">\n          Don't have an account? <Link to=\"/signup\">Sign up</Link>\n        </div>\n       \n      </div>\n    </div>\n  );\n}\n\nexport default Login;","import React, { useState, useContext } from 'react';\nimport { checkAuth } from '../../utils';\nimport { Redirect } from 'react-router-dom';\n\nimport './Signup.css';\n\nimport { Link } from 'react-router-dom';\nimport ErrorField from '../../components/ErrorField/ErrorField';\nimport { AuthContext } from '../../contexts/AuthContext';\nimport { Avatar } from '@material-ui/core';\nimport { Button, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\n\n\nconst Signup = (props) => {\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const { setSignUpMsg } = useContext(AuthContext);\n\n  const [errors, setErrors] = useState({\n    username: '',\n    email: '',\n    password: '',\n    common: ''\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const formdata = new FormData();\n\n    formdata.append('username', username);\n    formdata.append('email', email);\n    formdata.append('password', password);\n\n    fetch('/api/signup', {\n      method: 'POST',\n      body: formdata\n    })\n    .then(res => res.json())\n    .then(data => {\n      if (data.status === 200) {\n        // everything went well, redirect to Login\n        setUsername('');\n        setEmail('');\n        setPassword('');\n\n        // show success message\n        setSignUpMsg(data.msg);\n\n        props.history.push('/login');\n      } else {\n        switch (data.field) {\n          case \"username\":\n            setErrors({\n              username: data.msg,\n              email: '',\n              password: '',\n              common: ''\n            });\n            break;\n          case \"email\":\n            setErrors({\n              username: '',\n              email: data.msg,\n              password: '',\n              common: ''\n            });\n            break;\n          case \"password\":\n            setErrors({\n              username: '',\n              email: '',\n              password: data.msg,\n              common: ''\n            });\n            break;\n          case \"common\":\n            setErrors({\n              username: '',\n              email: '',\n              password: '',\n              common: data.msg\n            });\n            break;\n          default:\n            setErrors({\n              username: '',\n              email: '',\n              password: '',\n              common: \"Oops, something went wrong!\"\n            });\n            break;\n        }\n      }\n    })\n    .catch(e => {\n      setErrors({\n        username: '',\n        email: '',\n        password: '',\n        common: \"Oops, something went wrong!\"\n      });\n    });\n  }\n\n  if (checkAuth()) {\n    return <Redirect to={{\n      pathname: '/'\n    }} />\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"signup\">\n        <h1>Register</h1>\n        <Avatar className=\"icon\" />\n        <Form onSubmit={handleSubmit}\n        className=\"signup__form\">\n        <FormGroup>\n          <Label for=\"username\">Username</Label>\n          <Input type=\"text\" \n          name=\"username\"\n          value={username} \n          id=\"username\" \n          placeholder=\"Choose a username\"\n          onChange={e => setUsername(e.target.value)}\n          required\n          minLength=\"2\"\n          maxLength=\"50\"\n          />\n          {errors.username && <ErrorField error={errors.username} />}\n        </FormGroup>\n        <FormGroup>\n          <Label for=\"email\">Email</Label>\n          <Input type=\"email\" \n          name=\"email\"\n          value={email} \n          id=\"email\" \n          placeholder=\"yourmail@mail.com\"\n          onChange={e => setEmail(e.target.value)}\n          required\n          maxLength=\"150\"\n          />\n          {errors.email && <ErrorField error={errors.email} />}\n        </FormGroup>\n        <FormGroup>\n          <Label for=\"password\">Password</Label>\n          <Input type=\"password\" \n          name=\"password\"\n          value={password} \n          id=\"password\" \n          placeholder=\"Choose a password\"\n          onChange={e => setPassword(e.target.value)}\n          required\n          minLength=\"8\"\n          />\n {errors.password && <ErrorField error={errors.password} />}\n            {errors.common && <ErrorField error={errors.common} />}       \n             </FormGroup>\n             <button type=\"submit\" className=\"btn btn-primary\">Sign up</button>\n\n        </Form>\n        <div className=\"msg\">\n          Already have an account? <Link to=\"/login\">Log in</Link>\n        </div>\n\n      </div>\n    </div>\n  );\n}\n\nexport default Signup;","import React, {useState} from 'react';\n\nimport './Header.css';\n\nimport CameraAltOutlinedIcon from '@material-ui/icons/CameraAltOutlined';\nimport Logo from '../../assets/logo.jpg';\nimport HomeOutlinedIcon from '@material-ui/icons/HomeOutlined';\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\nimport AddBoxOutlinedIcon from '@material-ui/icons/AddBoxOutlined';\nimport AccountCircleOutlinedIcon from '@material-ui/icons/AccountCircleOutlined';\nimport LocationOnOutlinedIcon from '@material-ui/icons/LocationOnOutlined';\n\nimport { NavLink, Link } from 'react-router-dom';\nimport {\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  NavbarBrand,\n  Nav,\n  NavItem,\n  Container,\n} from 'reactstrap';\n\n\nconst Header = () => {\n  const [collapsed, setCollapsed] = useState(true);\n\n  const toggleNavbar = () => setCollapsed(!collapsed);\n  return (\n    <header onClick={toggleNavbar} className=\"header\">\n      \n       <Navbar color=\"white\" light className=\"navbar-main\">\n       \n        <NavbarBrand href=\"/\" className=\"me-auto\">\n<Container className=\"navbrand\">\n  \n<Link style={{textDecoration: 'none'}} to=\"/\"  exact>\n<img src={Logo} alt=\"logo\" className=\"login__logo\" />\n<h1>Assessment</h1>\n        \n        </Link>\n</Container>\n       \n\n        </NavbarBrand>\n        <Collapse isOpen={!collapsed} navbar className=\"collapse-menu\">\n          <Nav navbar>\n            <NavItem>\n            <NavLink to=\"/\" exact>\n        <HomeOutlinedIcon />\n        Dashboard\n      </NavLink>\n            </NavItem>\n            <NavItem>\n            <NavLink to=\"/locations\" exact>\n        <LocationOnOutlinedIcon />\n        Locations\n      </NavLink>\n            </NavItem>\n            <NavItem>\n            <NavLink to=\"/search\">\n        <SearchOutlinedIcon />\n        Search\n      </NavLink>\n            </NavItem>\n            <NavItem>\n            <NavLink to=\"/newpost\">\n        <AddBoxOutlinedIcon />\n        New Location\n      </NavLink>\n            </NavItem>\n            <NavItem>\n            <NavLink to=\"/profile\">\n        <AccountCircleOutlinedIcon />\n        Profile\n      </NavLink>\n            </NavItem>\n          </Nav>\n        </Collapse>\n        <NavbarToggler onClick={toggleNavbar} className=\"me-2\" />\n\n      </Navbar>\n     \n      {/* <div>\n       <h5>MMS Image Geolocation App</h5>\n      </div>\n      <NavLink to=\"/\" exact>\n        <HomeOutlinedIcon />\n      </NavLink>\n      <NavLink to=\"/search\">\n        <SearchOutlinedIcon />\n      </NavLink>\n      <NavLink to=\"/newpost\">\n        <AddBoxOutlinedIcon />\n      </NavLink>\n      <NavLink to=\"/profile\">\n        <AccountCircleOutlinedIcon />\n      </NavLink> */}\n    </header>\n  );\n}\n\nexport default Header;","import React, { createContext, useState, useEffect } from 'react';\nimport { getToken } from '../utils';\n\nexport const PostContext = createContext();\n\nconst PostContextProvider = ({ children }) => {\n  const [posts, setPosts] = useState([]);\n\n  const getPosts = () => {\n    fetch('/api/posts', {\n      headers: {\n        'x-access-token': getToken()\n      }\n    })\n    .then(res => res.json())\n    .then(data => {\n      if (data.status === 200) {\n        setPosts(data.posts);\n      } else {\n        setPosts('');\n      }\n    })\n    .catch(e => {\n      setPosts('');\n    });\n  }\n\n  useEffect(getPosts, []);\n\n  return (\n    <PostContext.Provider value={{\n      posts,\n      setPosts\n    }}>\n      {children}\n    </PostContext.Provider>\n  );\n}\n\nexport default PostContextProvider;","import React, { useContext, useState } from 'react';\n\nimport { getToken, checkAuth } from '../../utils';\n\nimport './Post.css';\n\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\n\nimport CommentOutlinedIcon from '@material-ui/icons/CommentOutlined';\nimport ImageIcon from '@material-ui/icons/Image';\n\nimport jwt from 'jsonwebtoken';\nimport Cookie from 'js-cookie';\n\nimport { PostContext } from '../../contexts/PostContext';\nimport ErrorField from '../../components/ErrorField/ErrorField';\nimport { Link } from 'react-router-dom';\nimport { Col, Button } from 'reactstrap';\n\nconst Post = ({ id, public_id, author, img, post, date_posted, latitude, longitude }) => {\n  const { posts, setPosts } = useContext(PostContext);\n  const [error, setError] = useState('');\n  const [modal, setModal] = useState(false);\n\n  const toggleModal = () => {\n    setModal(!modal);\n  }\n\n  const deletePost = (pid, post_id) => {\n    if (!checkAuth()) {\n      // if no token\n      return window.location.replace('/login')\n    }\n\n    fetch('/api/delete_post', {\n      method: 'DELETE',\n      headers: {\n        'public_id': pid,\n        'post_id': post_id,\n        'x-access-token': getToken()\n      }\n    })\n    .then(res => res.json())\n    .then(data => {\n      if (data.status === 200) {\n        toggleModal();\n        setError('');\n        \n        window.location.reload('/');\n      } else {\n        toggleModal();\n        setError('Oops, Some, error, happened!');\n      }\n    })\n    .catch(e => {\n      toggleModal();\n      setError('Oops, Some, error, happened!');\n    })  \n  }\n\n  const copyLink = () => {\n    // copy link to clipboard\n    console.log('link copied')\n  }\n\n  const isAuthor = (pid) => {\n    if (!checkAuth()) {\n      // if no token\n      return window.location.replace('/login')\n    }\n\n    const { public_id } = jwt.decode(Cookie.get('token'));\n\n    if (public_id === pid) {\n      return true;\n    }\n\n    return false;\n  }\n\n  \n\n  \n  if (!checkAuth()) {\n    // if no token\n    return window.location.replace('/login')\n  }\n\n  return (\n    <Col lg=\"4\" md=\"6\" sm=\"6\" xs=\"12\">\n      {modal && <div className=\"modal\">\n        <div className=\"content\">\n        <span onClick={toggleModal} className=\"close\">&times;</span>\n        \n        </div>\n\n      </div>}\n      <div className=\"post__top\">\n        <h4>{post}</h4>\n       \n      </div>\n      <div className=\"post__img\">\n        <img onDoubleClick={null} src={img} alt=\"post-img\" />\n      </div>\n\n      {error && <ErrorField error={error} />}\n<div className=\"buttons__div\">\n  <div  className=\"buttons__div2\">\n  <div className=\"post__fun\">\n        <Link to={`/images/${id}`} className=\"comment_link\">\n          <Button><ImageIcon className=\"icon\"/>Images</Button>\n        </Link>\n      </div>\n      \n      <div className=\"post__fun\">\n      <Link to={`/comments/${id}`} className=\"comment_link\">\n      <Button> <CommentOutlinedIcon className=\"icon\" />Notes</Button>   \n        </Link>\n      </div>\n  </div>\n  <div  className=\"buttons__div3\">\n  <div className=\"post__post\">\n        <strong>Author: </strong>{author} \n      </div>\n      {isAuthor(public_id) ? (\n          <>\n          <Button onClick={() => deletePost(public_id, id)}>Delete</Button>\n          </>\n        ) : (\n         null\n        )}\n</div>\n     \n     \n    \n</div>\n    </Col>\n  );\n}\n\nexport default Post;","import React, { useContext } from 'react';\n\nimport './Home.css';\nimport { PostContext } from '../../contexts/PostContext';\nimport Post from '../../components/Post/Post';\nimport { checkAuth } from '../../utils';\nimport { Container, Row, Col, Button } from 'reactstrap';\nimport {Link} from 'react-router-dom'\n\n\nconst Home = (props) => {\n  const { posts } = useContext(PostContext);\n\n\n\n  const postList = posts.length > 0 ? (\n   \n    posts.map(post => (\n      <Post key={post.id} public_id={post.public_id} id={post.id} author={post.author}  img={post.img}  post={post.post} latitude={post.latitude} longitude={post.longitude} />\n    ))\n  ) : (\n    <p className=\"home__msg\">Oops! No locations sites yet...</p>\n  );\n\n  if (!checkAuth()) {\n    // if no token\n    return window.location.replace('/login')\n  }\n  \n  return (\n   <div className=\"home\">\n     {/* <div className=\"dashboard\">\n      <Link to=\"/dashboard\">\n      <Button>Dashboard</Button>\n      </Link>\n      </div> */}\n    <div className=\"heading__div\"><h2>Location Sites</h2></div>\n    \n <Container className=\"container\">\n        <Row className='row'>\n        {postList}\n        </Row>\n       </Container>\n   </div>\n      \n  );\n}\n\nexport default Home;","import React, { useState } from 'react';\n\nimport { checkAuth, getToken } from '../../utils';\nimport {Link} from 'react-router-dom';\nimport './Search.css';\n\nconst Search = () => {\n  const [results, setResults] = useState('');\n  const [search, setSearch] = useState('');\n  const [message, setMessage] = useState('');\n  \n  const handleSubmit = (e) => {\n    e.preventDefault();\n  }\n\n  const makeSearch = (search) => {\n    if (!checkAuth()) {\n      // if no token\n      return window.location.replace('/login')\n    }\n\n    // make a formdata\n    const formdata = new FormData();\n\n    formdata.append('term', search);\n\n    // make a request\n    fetch('/api/search', {\n      method: 'POST',\n      body: formdata,\n      headers: {\n        'x-access-token': getToken()\n      }\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.status === 200) {\n          setMessage('');\n          setResults(data.posts);\n        } else if (data.status === 404) {\n          setResults('');\n          setMessage(\"Oops, No locations found...\");\n        } else {\n          setResults('');\n          setMessage(\"Oops, Some error happened! Try Again...\");\n        }\n      })\n      .catch(e => {\n        setResults('');\n        setMessage(\"Oops, Some error happened! Try Again...\");\n      });\n  }\n\n\n  const output = results && (\n    results.map(result => (\n      <div key={result.id} className=\"user\">\n        <Link to={`images/${result.id}`}>\n        <div>\n        <img className=\"user__profile_pic\" src={result.img} alt=\"location image\" />\n        <span className=\"user__username\">\n          {result.post}\n        </span>\n        </div>\n        </Link>\n       \n        <div>\n          \n        </div>\n      </div>\n    ))\n  );\n\n  return (\n    <div className=\"search\">\n      <h1>Search</h1>\n      <form onSubmit={handleSubmit}>\n        <input type=\"text\" placeholder=\"Search Locations...\" value={search} onChange={(e) => {\n          setSearch(e.target.value);\n          if (e.target.value !== '') {\n            makeSearch(e.target.value);\n          } \n        }} />\n      </form>\n\n      <p className=\"search__message\">{message && message}</p>\n      <div className=\"search__results\">\n        {output}\n      </div>\n    </div>\n  );\n}\n\nexport default Search;","import React, { useState, useContext, useRef, useEffect, useCallback } from 'react';\n\nimport './NewPost.css';\nimport { PostContext } from '../../contexts/PostContext';\nimport { getToken, checkAuth } from '../../utils';\nimport { Button, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\nimport Webcam from \"react-webcam\";\nimport { useGeolocated } from \"react-geolocated\";\n\nconst NewPost = (props) => {\n  const [img, setImg] = useState('');\n  const [text, setText] = useState('');\n  const [error, setError] = useState('');\n  const [latitude, setLatitude] = useState('');\n  const [longitude, setLongitude] = useState('');\n\n\n  const { coords, isGeolocationAvailable, isGeolocationEnabled } =\n        useGeolocated({\n          positionOptions: {\n            enableHighAccuracy: true,\n        },\n        userDecisionTimeout: 5000,\n        \n      });\n\n  const { posts, setPosts } = useContext(PostContext);\n\n  useEffect(() => {    \n  },[])\n  \n  \n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (!checkAuth()) {\n      // if no token\n      return window.location.replace('/login')\n    }\n    if (img==='') {\n      return window.alert(\"Image Not Set\")\n    }\n\n    const convertBase64ToFile = function (image) {\n      const byteString = atob(image.split(',')[1]);\n      const ab = new ArrayBuffer(byteString.length);\n      const ia = new Uint8Array(ab);\n      for (let i = 0; i < byteString.length; i += 1) {\n        ia[i] = byteString.charCodeAt(i);\n      }\n      const newBlob = new Blob([ab], {\n        type: 'image/jpeg',\n      });\n      return newBlob;\n    };\n    if (latitude === '') {\n      setLatitude(coords.latitude)\n    }\n    if (longitude === '') {\n      setLatitude(coords.longitude)\n    }\n    \n    const formdata = new FormData();\n\n    formdata.append('text', text);\n    formdata.append('img', convertBase64ToFile(img));\n    formdata.append('lat', latitude);\n    formdata.append('long', longitude);\n\n    fetch('/api/newpost', {\n      method: 'POST',\n      body: formdata,\n      headers: {\n        'x-access-token': getToken()\n      }\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.status === 200) {\n          setPosts([\n            data.post,\n            ...posts\n          ]);\n          setText('');\n          window.alert(\"Successfully added new location site\")\n\n          props.history.push('/locations');\n        } else {\n        setError(\"Oops, Some error happened! Try Again...\");\n\n        }\n      })\n      .catch(e => {\n        setError(\"Oops, Some error happened! Try Again...\");\n      });\n  }\n  const videoConstraints = {\n    width: 500,\n    height: 500,\n    facingMode: \"environment\"\n  };\n  const webcamRef = useRef(null);\n  const capture = useCallback(\n    () => {\n      const imageSrc = webcamRef.current.getScreenshot();\n      \n      setImg(imageSrc);\n    },\n    [webcamRef]\n  );\n  const retake = () => {\n    setImg('')\n  }\n\n  const handleCapture = (target) => {\n    if (target.files) {\n      if (target.files.length !== 0) {\n        const file = target.files[0];\n        const newUrl = URL.createObjectURL(file);\n        setImg(newUrl);\n      }\n    }\n  }\n  const handleFileInput = useRef(null);\n\n  // const askCameraPermission = async () => {\n  //   try {\n  //   await navigator.mediaDevices.getUserMedia({ video: true })\n  //   .then(response => {\n  //    window.alert(response)\n  //   })\n  // } catch (err) {\n  //   window.alert(err.message)\n  // }\n  //}\n\nconst isMobile = {\n  Android: function() {\n      return navigator.userAgent.match(/Android/i);\n  },\n  BlackBerry: function() {\n      return navigator.userAgent.match(/BlackBerry/i);\n  },\n  iOS: function() {\n      return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n  },\n  Opera: function() {\n      return navigator.userAgent.match(/Opera Mini/i);\n  },\n  Windows: function() {\n      return navigator.userAgent.match(/IEMobile/i) || navigator.userAgent.match(/WPDesktop/i);\n  },\n  any: function() {\n      return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());\n  }\n};\n\n\n\n\n  return (\n    <div className=\"newpost\">\n      <div className='mt'>\n        <h2>Add New Location</h2>\n        <br></br>\n      {!isMobile.any()?\n      img!=''? \n      (<img src={img} className=\"img\"/>)\n      :\n      (\n        <Webcam\n        audio={false}\n        height={500}\n        ref={webcamRef}\n        screenshotFormat=\"image/jpeg\"\n        width={500}\n        videoConstraints={videoConstraints}\n      />\n      )\n      :\n      img!=''? \n      (<img src={img} className=\"img\"/>)\n      :\n      (\n      <p>Capture an image to view it here</p>\n      )\n    }\n      </div>\n      {isMobile.any()?\n      <>\n      <br></br>\n    <label for=\"file\" className=\"label\">Capture Image</label>\n       <input \n       accept=\"image/*\" \n       id=\"file\" \n       type=\"file\" \n       capture=\"environment\"\n       ref={handleFileInput}\n       onChange={(e) => handleCapture(e.target)}\n       style={{visibility:\"hidden\"}}\n       />\n       </>\n       :\n       (\n       img===''?\n      (<Button onClick={capture}>Capture Image</Button>)\n      :\n      (<Button onClick={retake}>Retake</Button>)  \n       )\n      }\n     \n     \n      <br></br>\n      <br></br>\n      {error && <p className=\"newpost__error\">Oops, Some Error happened! Try Again...</p>}\n      <Form onSubmit={handleSubmit}>\n      <FormGroup>\n        {img!='' ?\n          (          <Label style={{color: \"green\"}} for=\"img\"><strong>Image Set</strong></Label>\n          )\n          :\n          (          <Label style={{color: \"red\"}}  for=\"img\"><strong>Image not set... Capture a photo</strong></Label>\n          )\n        }\n\n        </FormGroup>\n        <FormGroup>\n          <Label for=\"siteName\"><strong>Location Site Name</strong></Label>\n          <Input type=\"text\" name=\"name\" id=\"siteName\" placeholder=\"Enter Site Name\" onChange={\n          e => setText(e.target.value)} required/>\n        \n        </FormGroup>\n       \n        <FormGroup>\n          <Label for=\"img\"><strong>Location:</strong></Label>\n\n          {!isGeolocationAvailable ? (\n            <>\n            <div>Your browser does not support Geolocation... Manually enter location</div>\n            <br></br>\n            <FormGroup>\n          <Label for=\"latitude\"><strong>Latitude</strong></Label>\n          <Input type=\"text\" name=\"latitude\" id=\"latitude\" placeholder=\"Enter Latitude\" onChange={\n          e => setLatitude(e.target.value)} required/>\n        \n        </FormGroup>\n        <FormGroup>\n          <Label for=\"longitude\"><strong>Longitude</strong></Label>\n          <Input type=\"text\" name=\"longitude\" id=\"siteName\" placeholder=\"Enter Longitude\" onChange={\n          e => setLongitude(e.target.value)} required/>\n        \n        </FormGroup>\n            </>\n    ) : !isGeolocationEnabled ? (\n      <>\n        <div>Geolocation is not enabled... Manually enter location</div>\n        <br></br>\n        <FormGroup className='center'>\n          <Label for=\"latitude\"><strong>Latitude</strong></Label>\n          <Input type=\"text\" name=\"latitude\" id=\"latitude\" placeholder=\"Enter Latitude\" value={latitude} onChange={\n          e => setLatitude(e.target.value)} required/>\n        \n        </FormGroup>\n        <FormGroup>\n          <Label for=\"longitude\"><strong>Longitude</strong></Label>\n          <Input type=\"text\" name=\"longitude\" id=\"siteName\" placeholder=\"Enter Longitude\" value={longitude} onChange={\n          e => setLongitude(e.target.value)} required/>\n        \n        </FormGroup>\n        </>\n    ) : coords ? (\n      \n        <table>\n            <tbody>\n                <tr>\n                    <td><strong>Latitude</strong></td>\n                    <td>{coords.latitude}</td>\n                </tr>\n                <tr>\n                    <td><strong>Longitude</strong></td>\n                    <td>{coords.longitude}</td>\n                </tr>\n               \n            </tbody>\n        </table>\n    ) : (\n        <div>Getting the location data&hellip; </div>\n    )}\n\n        </FormGroup>\n        <Button>Add Location Site</Button>\n      </Form>\n     \n    </div>\n  );\n}\n\nexport default NewPost;","import React, { useState, useContext, useRef, useCallback } from 'react';\n\nimport './NewImage.css';\nimport { PostContext } from '../../contexts/PostContext';\nimport { getToken, checkAuth } from '../../utils';\nimport { Button, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\nimport Webcam from \"react-webcam\";\nimport { useGeolocated } from \"react-geolocated\";\nimport {Link} from 'react-router-dom'\n\nconst NewImage = (props) => {\n  const { id } = props.match.params;\n  const [img, setImg] = useState('');\n  const [text, setText] = useState('');\n  const [error, setError] = useState('');\n  const [image, setImage] = useState('');\n  const [latitude, setLatitude] = useState('');\n  const [longitude, setLongitude] = useState('');\n\n  const { coords, isGeolocationAvailable, isGeolocationEnabled } =\n        useGeolocated({\n          positionOptions: {\n            enableHighAccuracy: true,\n        },\n        userDecisionTimeout: 5000,\n        \n      });\n\n  const { posts, setPosts } = useContext(PostContext);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (!checkAuth()) {\n      // if no token\n      return window.location.replace('/login')\n    }\n    if (img==='') {\n      return window.alert(\"Image Not Set\")\n    }\n\n    const convertBase64ToFile = function (image) {\n      const byteString = atob(image.split(',')[1]);\n      const ab = new ArrayBuffer(byteString.length);\n      const ia = new Uint8Array(ab);\n      for (let i = 0; i < byteString.length; i += 1) {\n        ia[i] = byteString.charCodeAt(i);\n      }\n      const newBlob = new Blob([ab], {\n        type: 'image/jpeg',\n      });\n      return newBlob;\n    };\n\n    if (latitude === '') {\n      setLatitude(coords.latitude)\n    }\n    if (longitude === '') {\n      setLatitude(coords.longitude)\n    }\n    \n    const formdata = new FormData();\n\n    formdata.append('name', image);\n    formdata.append('id', id);\n    formdata.append('img', convertBase64ToFile(img));\n    formdata.append('lat', latitude);\n    formdata.append('long', longitude);\n\n    fetch('/api/add_image', {\n      method: 'POST',\n      body: formdata,\n      headers: {\n        'x-access-token': getToken()\n      }\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.status === 200) {\n          // setImages([\n          //   ...images,\n          //   data.image\n          // ]);\n          setImage('');\n          setText('');\n          window.alert(\"Successfully added new image\")\n  \n          props.history.push(`/images/${id}`);\n        } else {\n        setError(\"Oops, Some error happened! Try Again...\");\n\n        }\n      })\n      .catch(e => {\n        setError(\"Oops, Some error happened! Try Again...\");\n      });\n  }\n  const videoConstraints = {\n    width: 500,\n    height: 500,\n    facingMode: \"environment\"\n  };\n  const webcamRef = React.useRef(null);\n  const capture = React.useCallback(\n    () => {\n      const imageSrc = webcamRef.current.getScreenshot();\n      \n      setImg(imageSrc);\n    },\n    [webcamRef]\n  );\n  const retake = () => {\n    setImg('')\n  }\n\n  const handleCapture = (target) => {\n    if (target.files) {\n      if (target.files.length !== 0) {\n        const file = target.files[0];\n        const newUrl = URL.createObjectURL(file);\n        setImg(newUrl);\n      }\n    }\n  }\n  const handleFileInput = useRef(null);\n  \n  const isMobile = {\n    Android: function() {\n        return navigator.userAgent.match(/Android/i);\n    },\n    BlackBerry: function() {\n        return navigator.userAgent.match(/BlackBerry/i);\n    },\n    iOS: function() {\n        return navigator.userAgent.match(/iPhone|iPad|iPod/i);\n    },\n    Opera: function() {\n        return navigator.userAgent.match(/Opera Mini/i);\n    },\n    Windows: function() {\n        return navigator.userAgent.match(/IEMobile/i) || navigator.userAgent.match(/WPDesktop/i);\n    },\n    any: function() {\n        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());\n    }\n  };\n\n  return (\n    <div className=\"newpost\">\n      <h2>Add New Image</h2>\n      <br></br>\n       <div className=\"back\">\n       <Link to=\"/locations\">\n      <Button>Back</Button>\n      </Link>\n       </div>\n      \n      <br></br>\n      <div>\n      {!isMobile.any()?\n        img!=''? \n      (<img src={img} className=\"img\"/>)\n      :\n      (\n        <Webcam\n        audio={false}\n        height={500}\n        ref={webcamRef}\n        screenshotFormat=\"image/jpeg\"\n        width={500}\n        videoConstraints={videoConstraints}\n      />\n      )\n      :\n      img!=''? \n      (<img src={img} className=\"img\"/>)\n      :\n      (\n      <p>Capture an image to view it here</p>\n      )\n    }\n    \n      \n      </div>\n      {isMobile.any()?\n      <>\n      <br></br>\n    <label for=\"file\" className=\"label\">Capture Image</label>\n       <input \n       accept=\"image/*\" \n       id=\"file\" \n       type=\"file\" \n       capture=\"environment\"\n       ref={handleFileInput}\n       onChange={(e) => handleCapture(e.target)}\n       style={{visibility:\"hidden\"}}\n       />\n       </>\n       :\n      (img===''?\n      (<Button onClick={capture}>Capture Image</Button>)\n      :\n      (<Button onClick={retake}>Retake</Button>)  \n      )\n    }\n      \n      <br></br>\n      <br></br>\n      {error && <p className=\"newpost__error\">Oops, Some Error happened! Try Again...</p>}\n      <Form onSubmit={handleSubmit}>\n      <FormGroup>\n        {img!='' ?\n          (          <Label style={{color: \"green\"}} for=\"img\"><strong>Image Set</strong></Label>\n          )\n          :\n          (          <Label style={{color: \"red\"}}  for=\"img\"><strong>Image not set... Capture a photo</strong></Label>\n          )\n        }\n\n        </FormGroup>\n        <FormGroup>\n          <Label for=\"imageName\"><strong>Image Name</strong></Label>\n          <Input type=\"text\" name=\"name\" id=\"imageName\" placeholder=\"Enter Image Name\" onChange={\n          e => setImage(e.target.value)} required/>\n        \n        </FormGroup>\n       \n        <FormGroup>\n          <Label for=\"location\"><strong>Location:</strong></Label>\n\n          {!isGeolocationAvailable ? (\n            <>\n        <div>Your browser does not support Geolocation... Manually enter location</div>\n        <br></br>\n        <FormGroup className='center'>\n      <Label for=\"latitude\"><strong>Latitude</strong></Label>\n      <Input type=\"text\" name=\"latitude\" id=\"latitude\" placeholder=\"Enter Latitude\" onChange={\n      e => setLatitude(e.target.value)} required/>\n    \n    </FormGroup>\n    <FormGroup className='center'>\n      <Label for=\"longitude\"><strong>Longitude</strong></Label>\n      <Input type=\"text\" name=\"longitude\" id=\"siteName\" placeholder=\"Enter Longitude\" onChange={\n      e => setLongitude(e.target.value)} required/>\n    \n    </FormGroup>\n        </>\n    ) : !isGeolocationEnabled ? (\n      <>\n        <div>Geolocation is not enabled... Manually enter location</div>\n        <br></br>\n        <FormGroup className='center'>\n          <Label for=\"latitude\"><strong>Latitude</strong></Label>\n          <Input type=\"text\" name=\"latitude\" id=\"latitude\" placeholder=\"Enter Latitude\" value={latitude} onChange={\n          e => setLatitude(e.target.value)} required/>\n        \n        </FormGroup>\n        <FormGroup>\n          <Label for=\"longitude\"><strong>Longitude</strong></Label>\n          <Input type=\"text\" name=\"longitude\" id=\"siteName\" placeholder=\"Enter Longitude\" value={longitude} onChange={\n          e => setLongitude(e.target.value)} required/>\n        \n        </FormGroup>\n        </>\n    ) : coords ? (\n        <table>\n            <tbody>\n                <tr>\n                    <td>latitude</td>\n                    <td>{coords.latitude}</td>\n                </tr>\n                <tr>\n                    <td>longitude</td>\n                    <td>{coords.longitude}</td>\n                </tr>\n               \n            </tbody>\n        </table>\n    ) : (\n        <div>Getting the location data&hellip; </div>\n    )}\n\n        </FormGroup>\n        <Button>Add Image Object</Button>\n      </Form>\n     \n    </div>\n  );\n}\n\nexport default NewImage;","import React, { useEffect, useState } from 'react';\n\nimport { checkAuth, getToken } from '../../utils';\nimport Cookie from 'js-cookie';\nimport './Profile.css';\n\nconst Profile = () => {\n  const [currentUser, setCurrentUser] = useState('');\n  const [msg, setMsg] = useState('');\n\n  const logout = async () => {\n    if (!checkAuth()) {\n      // if no token\n      return window.location.replace('/login')\n    }\n\n    await Cookie.remove('token');\n    return window.location.replace('/login')\n  }\n\n  // get current user\n  const getCurrentUser = () => {\n    fetch('/api/get_current_user', {\n      method: 'GET',\n      headers: {\n        'x-access-token': getToken()\n      }\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.status === 200) {\n          setMsg('');\n          setCurrentUser(data.user);\n        } else {\n          setMsg('Oops, Some error happened!');\n        }\n      })\n      .catch(e => {\n        setMsg('Oops, Some error happened!');\n      })\n  }\n\n  useEffect(getCurrentUser, []);\n\n  if (!checkAuth()) {\n    // if no token\n    return window.location.replace('/login')\n  }\n\n  const component = currentUser ? (\n    <div>\n            <div className=\"profile__top\">User Profile</div>\n\n      <div className=\"profile__header\">\n\n        <div className=\"profile__header__details\">\n        <p>\n        Username: \n        </p>\n      <p className=\"profile__header__username\">\n         {currentUser.username}\n        </p>\n        <p>\n        Email: \n        </p>\n      <p className=\"profile__header__username\">\n         {currentUser.email}\n        </p>\n        </div>\n     \n      <div className=\"profile__header__logout\">\n        <button onClick={logout} className=\"btn btn-primary\" href=\"/logout\">Logout</button>\n      </div>\n    </div>\n\n    <div className=\"profile__body_top\">\n      <div>\n  \n      </div>\n     \n     \n    </div>\n\n    <div className=\"profile__body_middle\">\n        <span className=\"profile__verbose\">Posts: </span>\n        <span className=\"profile__number\"><strong>{currentUser.posts}</strong></span>\n    </div>\n\n    <a className=\"profile__body_edit-btn btn btn-primary\" href=\"/edit_profile\">Edit Profile</a>\n    </div>\n  ) : (\n      <p className=\"msg\">{msg}</p>\n    );\n\n  return (\n    <div className=\"profile\">\n      {component}\n    </div>\n  );\n}\n\nexport default Profile;","import React, { useState, useEffect } from 'react';\n\nimport './EditProfile.css';\nimport { checkAuth, getToken } from '../../utils';\nimport ErrorField from '../../components/ErrorField/ErrorField';\nimport { Button, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\n\nconst EditProfile = (props) => {\n  const [img, setImg] = useState();\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n\n  const [errors, setErrors] = useState({\n    username: '',\n    email: '',\n    common: ''\n  });\n\n  // get current user\n  const getCurrentUser = () => {\n    if (!checkAuth()) {\n      // if no token\n      return window.location.replace('/login')\n    }\n    fetch('/api/get_current_user', {\n      method: 'GET',\n      headers: {\n        'x-access-token': getToken()\n      }\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.status === 200) {\n          setUsername(data.user.username);\n          setEmail(data.user.email);\n        } else {\n          setErrors({\n            username: '',\n            email: '',\n            password: '',\n            common: \"Oops, something went wrong!\"\n          });\n          \n        }\n      })\n      .catch(e => {\n        setErrors({\n          username: '',\n          email: '',\n          password: '',\n          common: \"Oops, something went wrong!\"\n        });\n      })\n  }\n\n  useEffect(getCurrentUser, []);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (!checkAuth()) {\n      // if no token\n      return window.location.replace('/login')\n    }\n\n    const formdata = new FormData();\n\n    formdata.append('username', username);\n    formdata.append('email', email);\n\n    \n\n    fetch('/api/update_profile', {\n      method: 'PUT',\n      body: formdata,\n      headers: {\n        'x-access-token': getToken()\n      }\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.status === 200) {\n          window.location.replace('/profile');\n        } else {\n          switch (data.field) {\n            case \"username\":\n              setErrors({\n                username: data.msg,\n                email: '',\n                common: ''\n              });\n              break;\n            case \"email\":\n              setErrors({\n                username: '',\n                email: data.msg,\n                common: ''\n              });\n              break;\n            case \"common\":\n              setErrors({\n                username: '',\n                email: '',\n                common: data.msg\n              });\n              break;\n            default:\n              setErrors({\n                username: '',\n                email: '',\n                common: \"Oops, something went wrong!\"\n              });\n              break;\n          }\n        }\n      })\n      .catch(e => {\n        setErrors({\n          username: '',\n          email: '',\n          common: \"Oops, something went wrong!\"\n        });\n      })\n  }\n\n  if (!checkAuth()) {\n    // if no token\n    return window.location.replace('/login')\n  }\n\n  return (\n    <div className=\"edit_profile\">\n      <p className=\"edit_profile__top\">Edit Profile</p>\n      <Form onSubmit={handleSubmit} className=\"login__form\">\n      {errors.common && <ErrorField error={errors.common} />}\n        <FormGroup>\n          <Label for=\"username\">Username</Label>\n          <Input type=\"text\" name=\"username\" id=\"username\" placeholder=\"Username\" \n          onChange={e => setUsername(e.target.value)} required\n          value={username}\n          />\n        {errors.username && <ErrorField error={errors.username} />}\n        </FormGroup>\n        <FormGroup>\n          <Label for=\"email\">Email</Label>\n          <Input type=\"email\" name=\"email\" id=\"email\" placeholder=\"Email\" \n          onChange={e => setEmail(e.target.value)} required\n          value={email}\n          />\n          {errors.email && <ErrorField error={errors.email} />}\n\n        </FormGroup>\n        <button type=\"submit\" className=\"btn btn-primary\">Update</button>\n\n      </Form>\n      \n    </div>\n  );\n}\n\nexport default EditProfile;","import React, { createContext, useState } from 'react';\n\nexport const CommentContext = createContext();\n\nconst CommentContextProvider = ({ children }) => {\n  const [comments, setComments] = useState([]);\n\n  return (\n    <CommentContext.Provider value={{\n      comments,\n      setComments\n    }}>\n      {children}\n    </CommentContext.Provider>\n  );\n}\n\nexport default CommentContextProvider;","import React, { useState, useEffect, useContext } from 'react';\n\nimport './Comments.css';\nimport { checkAuth, getToken } from '../../utils';\nimport { CommentContext } from '../../contexts/CommentContext';\nimport { PostContext } from '../../contexts/PostContext';\nimport jwt from 'jsonwebtoken';\nimport Cookie from 'js-cookie';\nimport {Button} from 'reactstrap'\nimport {Link} from 'react-router-dom'\n\nconst Comments = (props) => {\n  const { id } = props.match.params;\n  const [msg, setMsg] = useState('Loading...');\n  const { comments, setComments } = useContext(CommentContext);\n  const { posts } = useContext(PostContext);\n  const [comment, setComment] = useState('');\n  const { public_id } = jwt.decode(Cookie.get('token'));\n  const [error, setError] = useState('');\n  const [modal, setModal] = useState(false);\n\n  const toggleModal = () => {\n    setModal(!modal);\n  }\n  let post = null;\n\n  post = posts.find(post => {\n    return String(post.id) === String(id);\n  });\n\n  const deleteComment = (pid, post_id, comment_id) => {\n    if (!checkAuth()) {\n      // if no token\n      return window.location.replace('/login')\n    }\n\n    fetch('/api/delete_comment', {\n      method: 'DELETE',\n      headers: {\n        'public_id': pid,\n        'post_id': post_id,\n        'comment_id': comment_id,\n        'x-access-token': getToken()\n      }\n    })\n    .then(res => res.json())\n    .then(data => {\n      if (data.status === 200) {\n        toggleModal();\n        setError('');\n        \n        window.location.reload('/');\n      } else {\n        toggleModal();\n        setError('Oops, Some, error, happened!');\n      }\n    })\n    .catch(e => {\n      toggleModal();\n      setError('Oops, Some, error, happened!');\n    })  \n  }\n\n  \n  const getComments = () => {\n    if (!checkAuth()) {\n      // if no token\n      return window.location.replace('/login')\n    }\n    if (!post) {\n      setMsg('No Locations Found!');\n    } else {\n      fetch('/api/comments', {\n        method: 'GET',\n        headers: {\n          'x-access-token': getToken(),\n          'id': id,\n        }\n      })\n        .then(res => res.json())\n        .then(data => {\n          if (data.status === 200) {\n            setMsg('');\n            setComments(data.comments);\n          } else {\n            setMsg('Oops, Something went wrong!!!')\n          }\n        })\n        .catch(e => {\n          setMsg('No Posts Found!');\n        });\n    }\n  }\n\n  useEffect(() => {\n    getComments();\n  }, [post]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const formdata = new FormData();\n\n    formdata.append('comment', comment);\n    formdata.append('id', id);\n\n    fetch('/api/add_comment', {\n      method: 'POST',\n      body: formdata,\n      headers: {\n        'x-access-token': getToken()\n      }\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.status === 200) {\n          setMsg('');\n          setComments([\n            ...comments,\n            data.comment\n          ]);\n          setComment('');\n        } else {\n          setMsg('Oops some error happened');\n        }\n      })\n      .catch(e => {\n        setMsg('Oops some error happened');\n      })\n  }\n\n  const component = post && (\n    <div className=\"comments__body\">\n      <div className=\"real_post\">\n        <div className=\"real_post_left\">\n        </div>\n        <div className=\"real_post_right\">\n        <br></br>\n        <img className=\"comments__img\" src={post.img}/>\n          <strong> {post.post}</strong>\n        </div>\n      </div>\n\n      {/* comments */}\n      {\n        comments.length > 0 ? (\n          <div className=\"comments\">\n            {comments.map(comment => (\n              <div key={comment.id} className=\"comment\">\n                <div className=\"comments__left\">\n                </div>\n                <div className=\"comments__right\">\n                  <div className=\"comments__right_top\">\n                    <strong>{comment.commentator}</strong>\n                    <span>{comment.comment}</span>\n                    <Button onClick={() => deleteComment(public_id, id, comment.id)}>delete</Button>\n\n                  </div>\n                  <div className=\"comments__extras\">\n                    <span>{comment.date_posted}</span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n            <p className=\"msg\">No Notes Found!!!</p >\n          )\n      }\n      <form className=\"add_comment\" onSubmit={handleSubmit}>\n        <input type=\"text\" required placeholder=\"Add a note...\" className=\"comment_box\" value={comment} onChange={(e) => {\n          setComment(e.target.value);\n        }} />\n        <button type=\"submit\" className=\"btn btn-primary post-btn\">Add</button>\n      </form>\n    </div>\n  );\n\n  if (!checkAuth()) {\n    // if no token\n    return window.location.replace('/login')\n  }\n\n  return (\n    <div className=\"comments\">\n      <div className=\"comments__header\">\n       <h2>Notes</h2>\n       \n      </div>\n      <div className=\"back\">\n<Link to=\"/locations\">\n<Button>Back</Button>\n</Link>\n      </div>\n      {msg && <p className=\"msg\">{msg}</p>}\n      {component}\n    </div>\n  );\n}\n\nexport default Comments;","import React, { createContext, useState } from 'react';\n\nexport const ImageContext = createContext();\n\nconst ImageContextProvider = ({ children }) => {\n  const [images, setImages] = useState([]);\n\n  return (\n    <ImageContext.Provider value={{\n      images,\n      setImages\n    }}>\n      {children}\n    </ImageContext.Provider>\n  );\n}\n\nexport default ImageContextProvider;","const MAPS_API = \"Insert API Key here\"\n\nexport default MAPS_API","import React, { useState, useEffect, useContext } from 'react';\nimport {Link} from 'react-router-dom'\nimport './Images.css';\nimport { checkAuth, getToken } from '../../utils';\nimport { ImageContext } from '../../contexts/ImageContext';\nimport { PostContext } from '../../contexts/PostContext';\nimport jwt from 'jsonwebtoken';\nimport Cookie from 'js-cookie';\nimport Webcam from \"react-webcam\";\nimport { useGeolocated } from \"react-geolocated\";\nimport {Button} from 'reactstrap'\nimport GoogleMapReact from 'google-map-react';\nimport LocationOnOutlinedIcon from '@material-ui/icons/LocationOnOutlined';\nimport MAPS_API from '../../config' \n\nconst Images = (props) => {\n  const { id } = props.match.params;\n  const [msg, setMsg] = useState('Loading...');\n  const { images, setImages } = useContext(ImageContext);\n  const { posts } = useContext(PostContext);\n  const [image, setImage] = useState('');\n  const { public_id } = jwt.decode(Cookie.get('token'));\n  const [error, setError] = useState('');\n  const [modal, setModal] = useState(false);\n  const [img, setImg] = useState('');\n  \n\n  const { coords, isGeolocationAvailable, isGeolocationEnabled } =\n        useGeolocated({\n          positionOptions: {\n            enableHighAccuracy: true,\n        },\n        userDecisionTimeout: 5000,\n        \n      });\n\n  const toggleModal = () => {\n    setModal(!modal);\n  }\n  let post = null;\n\n  post = posts.find(post => {\n    return String(post.id) === String(id);\n    \n  });\n\n  const MapMarker = (props) => {\n    return (\n\n<p style={{color: \"blue\"}}>< LocationOnOutlinedIcon style={{color: \"red\"}} />\n{props.name}</p>\n    );\n   }\n\n   const defaultProps = {\n  \n    center: {\n      lat: -33.9249,\n      lng: 18.4241\n     \n    },\n    zoom: 9\n  };\n  // const geoloc = () => {\n  //   navigator.geolocation.getCurrentPosition(function(position) {\n  //   let lat1 = position.coords.latitude\n  //   let lng1 = position.coords.longitude\n\n  //   window.alert(lat1+\"  \"+lng1);})\n  // }\n\n  const deleteImage = (pid, post_id, image_id) => {\n    if (!checkAuth()) {\n      // if no token\n      return window.location.replace('/login')\n    }\n\n    fetch('/api/delete_image', {\n      method: 'DELETE',\n      headers: {\n        'public_id': pid,\n        'post_id': post_id,\n        'image_id': image_id,\n        'x-access-token': getToken()\n      }\n    })\n    .then(res => res.json())\n    .then(data => {\n      if (data.status === 200) {\n        toggleModal();\n        setError('');\n        \n        window.location.reload(true);\n      } else {\n        toggleModal();\n        setError('Oops, Some, error, happened!');\n      }\n    })\n    .catch(e => {\n      toggleModal();\n      setError('Oops, Some, error, happened!');\n    })  \n  }\n\n  \n  const getImages = () => {\n    if (!checkAuth()) {\n      // if no token\n      return window.location.replace('/login')\n    }\n    if (!post) {\n      setMsg('No Posts Found!');\n    } else {\n      fetch('/api/images', {\n        method: 'GET',\n        headers: {\n          'x-access-token': getToken(),\n          'id': id,\n        }\n      })\n        .then(res => res.json())\n        .then(data => {\n          if (data.status === 200) {\n            setMsg('');\n            setImages(data.images);\n          } else {\n            setMsg('Oops, Something went wrong!!!')\n          }\n        })\n        .catch(e => {\n          setMsg('No Sites Found!');\n        });\n    }\n  }\n\n  useEffect(() => {\n    getImages();\n    \n  \n    \n  }, [post]);\n  \n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n\n    const convertBase64ToFile = function (image) {\n      const byteString = atob(image.split(',')[1]);\n      const ab = new ArrayBuffer(byteString.length);\n      const ia = new Uint8Array(ab);\n      for (let i = 0; i < byteString.length; i += 1) {\n        ia[i] = byteString.charCodeAt(i);\n      }\n      const newBlob = new Blob([ab], {\n        type: 'image/jpeg',\n      });\n      return newBlob;\n    };\n    const formdata = new FormData();\n\n    formdata.append('name', image);\n    formdata.append('id', id);\n    formdata.append('img', convertBase64ToFile(img));\n    formdata.append('lat', coords.latitude);\n    formdata.append('long', coords.longitude);\n\n    fetch('/api/add_image', {\n      method: 'POST',\n      body: formdata,\n      headers: {\n        'x-access-token': getToken()\n      }\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.status === 200) {\n          setMsg('');\n          setImages([\n            ...images,\n            data.image\n          ]);\n          setImage('');\n          window.location.reload(true);\n        } else {\n          setMsg('Oops some error happened');\n        }\n      })\n      .catch(e => {\n        setMsg('Oops some error happened');\n      })\n  }\n\n  const component = post && (\n    <>\n    <div className=\"images__body\">\n      <div className=\"real_post\">\n        <br></br>\n      <h2> {post.post}</h2>\n\n       <br></br>\n       <img className='post_image' src={post.img}/>\n      <div>\n        <p><strong>Timestamp: </strong>{post.date_posted}</p>\n        </div>\n      <div>\n        <p><strong>Latitude: </strong>{post.latitude}</p>\n        </div>\n        <div>\n        <p><strong>Longitude: </strong>{post.longitude}</p>\n        </div>\n        <div className=\"images__extras\">\n                  <span>Author: {post.author}</span>\n                  </div>\n                  </div>\n<br></br>\n<br></br>\n<h1>Mapped Image Geolocations</h1>\n<div style={{ height: '60vh', width: '70vw' }}>\n\n      <GoogleMapReact\n        bootstrapURLKeys={{ key: MAPS_API }}\n        // defaultCenter={defaultProps.center}\n        defaultCenter={defaultProps.center}\n        defaultZoom={defaultProps.zoom}\n      >\n        {images.length>0? images.map((im, i) => (\n      <MapMarker key={i.toString()} name={im.name} lat={parseFloat(im.latitude)} lng={parseFloat(im.longitude)} />\n    )):null}\n       \n      </GoogleMapReact>\n      </div>\n\n        <br></br>\n<br></br>\n        <h2>Images</h2>\n     <br></br>\n\n      {\n       \n        images.length > 0 ? (\n          <div className=\"images\">\n            {images.map(image => (\n              <div key={image.id} className=\"image\">\n                <div className=\"images__left\">\n                  <img className=\"image_img\" src={image.img} alt=\"img\" />\n                </div>\n                <div className=\"images__right\">\n                <h5><strong>{image.name}</strong></h5>\n                <h5>{image.date_posted.slice(0,9)}</h5>\n                <h5>{image.date_posted.slice(10)}</h5>\n\n                  <div className=\"images__right_top\">\n                    \n                    <strong>Latitude</strong>\n                    <span>{image.latitude}</span>\n                    </div>\n                    <div className=\"images__right_top\">\n                    <strong>Longitude</strong>\n                    <span>{image.longitude}</span>\n                    </div>\n                    <div className=\"images__right_top\">\n                    <Button onClick={() => deleteImage(public_id, id, image.id)}>delete</Button>\n</div>\n                  <div className=\"images__extras\">\n                  <span>Author: {image.author}</span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n            <p className=\"msg\">No Images Found!!!</p >\n          )\n      }\n    \n      \n    </div>\n    <form onSubmit={handleSubmit}>\n    <div className=\"add_image\" >\n     \n     <div className=\"input_div\">\n    <Link to={`/newimage/${id}`}>\n             <Button className=\"btn btn-primary post-btn\">Add New Image</Button>\n</Link>\n     </div>\n\n      \n          </div>\n          </form>\n    \n    </>\n  );\n  \n  \n  if (!checkAuth()) {\n    // if no token\n    return window.location.replace('/login')\n  }\n\n  return (\n    <div className=\"images\">\n      <div className=\"back\">\n      <Link to=\"/locations\">\n      <Button>Back</Button>\n      </Link>\n      </div>\n     \n      <br></br>\n      <br></br>\n      <div className=\"images__header\">\n       <h1>Location Site Images</h1>\n      \n       \n      \n      </div>\n      {msg && <p className=\"msg\">{msg}</p>}\n      {component}\n    \n    \n    \n    </div>\n  );\n}\n\nexport default Images;","import React, {useContext, useState, useEffect} from 'react'\nimport { PostContext } from '../../contexts/PostContext';\nimport { checkAuth, getToken } from '../../utils';\nimport GoogleMapReact from 'google-map-react';\nimport { Container } from 'reactstrap';\nimport LocationOnOutlinedIcon from '@material-ui/icons/LocationOnOutlined';\nimport './Dashboard.css'\nimport {Button} from 'reactstrap'\nimport {Link} from 'react-router-dom'\nimport MAPS_API from '../../config' \n\nfunction Dashboard(props) {\n  const { posts } = useContext(PostContext);\n  const [currentUser, setCurrentUser] = useState('');\n  const [msg, setMsg] = useState('');\n\n\n  const getCurrentUser = () => {\n    fetch('/api/get_current_user', {\n      method: 'GET',\n      headers: {\n        'x-access-token': getToken()\n      }\n    })\n      .then(res => res.json())\n      .then(data => {\n        if (data.status === 200) {\n          setMsg('');\n          setCurrentUser(data.user);\n        } else {\n          setMsg('Oops, Some error happened!');\n        }\n      })\n      .catch(e => {\n        setMsg('Oops, Some error happened!');\n      })\n  }\n\n  useEffect(getCurrentUser, []);\n\n  if (!checkAuth()) {\n    // if no token\n    return window.location.replace('/login')\n  }\n   \n   const MapMarker = (props) => {\n    return (\n\n<p style={{color: \"blue\"}}>< LocationOnOutlinedIcon style={{color: \"red\"}} />\n{props.title}</p>\n    );\n   }\n   \n  const defaultProps = {\n  \n    center: {\n      lat: -33.9249,\n      lng: 18.4241\n     \n    },\n    zoom: 9\n  };\n\n  if (!checkAuth()) {\n    // if no token\n    return window.location.replace('/login')\n  }\n  return (\n    <>\n    <div className=\"dashboard\">\n      <div className=\"dashboard__text\">\n      <h1>Dashboard</h1>\n    <div className='welcome'>\n    <h5>Welcome: {currentUser.username}</h5>\n    </div>\n    <h3>Locations Sites: {posts.length}</h3>\n      </div>\n   \n    <div className=\"map__div\">\n      {posts?\n      <GoogleMapReact\n        bootstrapURLKeys={{ key: MAPS_API }}\n        // defaultCenter={defaultProps.center}\n        defaultCenter={defaultProps.center}\n        defaultZoom={defaultProps.zoom}\n      >\n        {posts.length>0? posts.map((post, i) => (\n      <MapMarker key={i.toString()} title={post.post} lat={parseFloat(post.latitude)} lng={parseFloat(post.longitude)} />\n    )):null}\n       \n      </GoogleMapReact>\n:null}\n    \n    </div>\n<div className=\"locations__btn\">\n  <Link to=\"/locations\">\n  <Button size=\"lg\">View Locations</Button>\n  </Link>\n\n</div>\n    </div>\n   </>\n  )\n}\n\nexport default Dashboard","import React from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport './Main.css';\nimport Header from '../../components/Header/Header';\nimport Home from '../../pages/Home/Home';\nimport Search from '../../pages/Search/Search';\nimport NewPost from '../../pages/NewPost/NewPost';\nimport NewImage from '../../pages/NewImage/NewImage';\nimport Profile from '../../pages/Profile/Profile';\nimport EditProfile from '../../pages/EditProfile/EditProfile';\nimport Comments from '../../pages/Comments/Comments';\nimport Images from '../../pages/Images/Images';\nimport Dashboard from '../../pages/Dashboard/Dashboard.js';\n\nconst Main = () => {\n  return (\n    <Router>\n      <Header />\n\n        <Switch>\n          <Route path=\"/search\" component={Search} />\n          <Route path=\"/newpost\" component={NewPost} />\n          <Route path=\"/profile\" component={Profile} />\n          <Route path=\"/edit_profile\" component={EditProfile} />\n          <Route path=\"/comments/:id\" component={Comments} />\n          <Route path=\"/images/:id\" component={Images} />\n          <Route path=\"/newimage/:id\" component={NewImage} />\n          <Route path=\"/dashboard\" component={Dashboard} />\n          <Route path=\"/locations\" exact component={Home} />\n          <Route path=\"/\" exact component={Dashboard} />\n        </Switch>\n\n    </Router>\n  );\n}\n\nexport default Main;","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nconst { checkAuth } = require(\"./utils\");\n\nconst PrivateRoute = ({ component: Component, ...rest }) => {\n  return (\n    <Route\n      {...rest}\n      render={(props) => {\n        if (checkAuth()) {\n          return <Component {...props} />;\n        } else {\n          return <Redirect\n          to={{\n            pathname: \"/login\"\n          }}\n        />;\n        }\n      }\n      }\n    />\n  );\n}\n\nexport default PrivateRoute;","import React from 'react';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nimport './App.css';\n\nimport Login from './pages/Login/Login';\nimport Signup from './pages/Signup/Signup';\nimport Main from './containers/Main/Main';\nimport PostContextProvider from './contexts/PostContext';\nimport AuthContextProvider from './contexts/AuthContext';\nimport PrivateRoute from './PrivateRoute';\nimport CommentContextProvider from './contexts/CommentContext';\nimport ImageContextProvider from './contexts/ImageContext';\n\nconst App = () => {\n  return (\n    <Router>\n      <PostContextProvider>\n        <AuthContextProvider>\n          <CommentContextProvider>\n          <ImageContextProvider>\n          <div className=\"container\">\n            <Switch>\n              <Route path=\"/login\" component={Login} />\n              <Route path=\"/signup\" component={Signup} />\n\n              <PrivateRoute path=\"/search\" exact component={Main} />\n              <PrivateRoute path=\"/newpost\" exact component={Main} />\n              <PrivateRoute path=\"/profile\" exact component={Main} />\n              <PrivateRoute path=\"/comments/:id\" exact component={Main} />\n              <PrivateRoute path=\"/images/:id\" exact component={Main} />\n              <PrivateRoute path=\"/newimage/:id\" exact component={Main} />\n              <PrivateRoute path=\"/edit_profile\" exact component={Main} />\n              <PrivateRoute path=\"/\" exact component={Main} />\n              <PrivateRoute path=\"/dashboard\" exact component={Main} />\n              <PrivateRoute path=\"/locations\" exact component={Main} />\n            </Switch>\n          </div>\n          </ImageContextProvider>\n          </CommentContextProvider>\n        </AuthContextProvider>\n      </PostContextProvider>\n    </Router>\n\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);","import Cookie from 'js-cookie';\nimport jwt from 'jsonwebtoken';\n\nconst checkAuth = () => {\n  try {\n    const token = Cookie.get('token');\n\n    if (!token) {\n      return false;\n    }\n\n    // decode the token \n    const { exp } = jwt.decode(token);\n\n    if (exp < new Date().getTime() / 1000) {\n      return false;\n    } \n    // valid token\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nconst getToken = () => {\n  if (checkAuth()) {\n    return Cookie.get('token');\n  }\n}\n\nexport {\n  checkAuth,\n  getToken\n};","module.exports = __webpack_public_path__ + \"static/media/logo.4767f928.jpg\";"],"sourceRoot":""}